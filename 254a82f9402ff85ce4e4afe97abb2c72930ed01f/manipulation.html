<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { color: #585cf6; } /* Constant */
code span.co { color: #4c886b; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.dv { color: #0000cd; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cd; } /* Float */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { color: #687687; } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #036a07; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>OCEAN 5098: Data manipulation</title>


  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
  <link rel="icon" type="image/png" href="images/logo.png"/>


  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="OCEAN 5098: Data manipulation"/>
  <meta property="og:type" content="article"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="OCEAN 5098"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="OCEAN 5098: Data manipulation"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title"]}},"value":[{"type":"character","attributes":{},"value":["Data manipulation"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #4C4C4C;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

    .distill-site-header .logo img {
      max-height: 30px;
      width: auto;
      margin-bottom: -7px;
    }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <style type="text/css">
  .screenshot {
    border: 1px solid rgba(0, 0, 0, 0.2);
  }

  .fake-img {
    background: #bbb;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 0px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 12px;
  }
  .fake-img p {
    font-family: monospace;
    color: white;
    text-align: left;
    margin: 12px 0;
    text-align: center;
    font-size: 16px;
  }


  html {
    scroll-behavior: smooth;
  }
  d-article {
      contain: none;
    }
  #TOC {
    position: fixed;
    z-index: 50;
    background: #ebebeb;     /* or   background: white; */
    padding: 10px;           /* optional */
    border-radius: 5px;      /* optional */
    }

  /* Hide the ToC when resized to mobile or tablet:  480px, 768px, 900px */
  @media screen and (max-width: 900px) {
  #TOC {
      position: relative;
    }
  }

  p.comment {
  background-color: #94F99B;
  padding: 10px;
  border: 1px solid black;
  margin-left: 25px;
  border-radius: 5px;
  font-style: normal;
  }

  p.alert {
  background-color: #F0756D;
  padding: 10px;
  border: 1px solid black;
  margin-left: 25px;
  border-radius: 5px;
  font-style: normal;
  }




  </style>
  <!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="styles.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Data manipulation","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="http://www.oc.ntu.edu.tw/oceng/">
<img src="images/logo.png" alt="Logo"/>
</a>
<a href="index.html" class="title">OCEAN 5098</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="environment.html">Environment</a>
<a href="manipulation.html">Manipulation</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Data manipulation</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->

</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#topic-2---data-manipulation"><strong>Topic 2 - Data manipulation</strong></a></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><a href="data:text/x-markdown;base64,LS0tDQp0aXRsZTogIkRhdGEgbWFuaXB1bGF0aW9uIg0KLS0tDQoNCmBgYHtyIGV2YWwgPSBUUlVFLCAgbWVzc2FnZT1GLCBpbmNsdWRlPUYsIHdhcm5pbmc9RiwgcHVybD1GLCByZXN1bHRzPSJoaWRlIn0NCmtuaXRyOjpwdXJsKCdtYW5pcHVsYXRpb24uUm1kJywgZG9jdW1lbnRhdGlvbiA9IEYpDQpgYGANCg0KYGBge3IgZWNobz1GQUxTRSwgcHVybD1GfQ0KeGZ1bjo6ZW1iZWRfZmlsZSgnbWFuaXB1bGF0aW9uLlJtZCcpDQpgYGANCg0KYGBge3IgZWNobz1GQUxTRSwgcHVybD1GfQ0KeGZ1bjo6ZW1iZWRfZmlsZSgnbWFuaXB1bGF0aW9uLlInKQ0KYGBgDQoNCiMgKipUb3BpYyAyIC0gRGF0YSBtYW5pcHVsYXRpb24qKg0KDQpEYXRhIG1hbmlwdWxhdGlvbiBpbnZvbHZlcyBtb2RpZnlpbmcgZGF0YSB0byBtYWtlIGl0IGVhc2llciB0byByZWFkIGFuZCB0byBiZSBtb3JlIG9yZ2FuaXplZC4gV2UgbWFuaXB1bGF0ZSBkYXRhIGZvciBhbmFseXNpcyBhbmQgdmlzdWFsaXphdGlvbi4gSXQgaXMgYWxzbyB1c2VkIHdpdGggdGhlIHRlcm0g4oCYZGF0YSBleHBsb3JhdGlvbuKAmSB3aGljaCBpbnZvbHZlcyBvcmdhbml6aW5nIGRhdGEgdXNpbmcgYXZhaWxhYmxlIHNldHMgb2YgdmFyaWFibGVzLg0KDQpBdCB0aW1lcywgdGhlIGRhdGEgY29sbGVjdGlvbiBwcm9jZXNzIGRvbmUgYnkgbWFjaGluZXMgaW52b2x2ZXMgYSBsb3Qgb2YgZXJyb3JzIGFuZCBpbmFjY3VyYWNpZXMgaW4gcmVhZGluZy4gRGF0YSBtYW5pcHVsYXRpb24gaXMgYWxzbyB1c2VkIHRvIHJlbW92ZSB0aGVzZSBpbmFjY3VyYWNpZXMgYW5kIG1ha2UgZGF0YSBtb3JlIGFjY3VyYXRlIGFuZCBwcmVjaXNlLg0KDQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCmxpYnJhcnkgKGRhdGFzZXRzKSAjIGxvYWQgdGhlIGRhdGFzZXQgcGFja2FnZQ0Kcm0obGlzdD1scygpKSAjIHJlbW92ZSBvYmplY3RzIGFscmVhZHkgcHJlc2VudA0KZGF0YShpcmlzKSAjIGxvYWQgaXJpcyBkYXRhc2V0DQpscygpICMgdGhlIGZ1bmN0aW9uIGRhdGEgaW1wb3J0IGFuIG9iamVjdCAnaXJpcycNCmlyaXMgIyBwcmludCB0aGUgb2JqZWN0DQpmaXgoaXJpcykgIyBvcGVuIGEgc3BlYWRzaGVldCBvbiB0aGUgb2JqZWN0DQpzdW1tYXJ5KGlyaXMpICMgc3VtbWFyaXplIHRoZSBvYmplY3QNCmNsYXNzKGlyaXMpICMgZ2l2ZSB0aGUgY2xhc3Mgb2YgdGhlIG9iamVjdA0Kc3RyKGlyaXMpICMgZXhhbWluZSB0aGUgc3RydWN0dXJlIG9mIHRoZSBvYmplY3QNCmBgYA0KDQpUaGUgb2JqZWN0IGBpcmlzJyBpcyBhIGRhdGEuZnJhbWUgYW5kIGlzIGNvbXBvc2VkIG9mIDUgdmFyaWFibGVzIGFuZCAxNTAgb2JzZXJ2YXRpb25zLiBGb3VyIHZhcmlhYmxlcyBhcmUgbnVtZXJpYywgb25lICBpcyBhIGZhY3RvciBtYWRlIG9mIDMgbGV2ZWxzLg0KDQpPdGhlciBvYmplY3QgdHlwZXMgYW5kIHN0cnVjdHVyZXMgYWxzbyBleGlzdDogZGF0YSBmcmFtZSwgIGZhY3RvciwgaW50ZWdlciwgbWF0cml4LCBldGMuIGJ1dCBtb3JlIG9uIHRoaXMgbGF0ZXIgKGl0IGlzIGxvbmcgYW5kIGJvcmluZywgeWV0IGltcG9ydGFudCkNCg0KDQojIyBSb3cgYW5kIGNvbHVtbiBzZWxlY3Rpb24NCg0KTGV0J3MgYXNzdW1lIGFuIG9ubGluZSBkYXRhZnJhbWUgcmVwb3J0aW5nIHRoZSBoZWlnaHQgYW5kIHNob2VzaXplIG9mIDEwIFRhaXdhbmVzZSBzdHVkZW50czoNCg0KYGBge3IsICBldmFsPUZBTFNFfQ0Kc3R1ZGVudHM8LXJlYWQudGFibGUoJ2h0dHBzOi8vd3d3LmRpcGludG90aGVyZWVmLmNvbS91cGxvYWRzLzMvNy8zLzUvMzczNTkyNDUvc3R1ZGVudHMudHh0JyxoZWFkZXI9VCwgc2VwPSJcdCIsIGRlYz0nLicpICMgaW5zcGVjdCB0aGUgb2JqZWN0IGNyZWF0ZWQNCmBgYA0KDQpBIHNpbmdsZSBjb2x1bW4gKGhlaWdodCkgaXMgbmVlZGVkIGZvciBmdXJ0aGVyIHByb2Nlc3NpbmcuIFRoaXMgaXMgYWNjb21wbGlzaGVkIGJ5IHVzaW5nIHRoZSBgJGAgb3BlcmF0b3IuIEEgY29sdW1uIGlzIHNlbGVjdGVkIGJ5IHB1dHRpbmcgdG9nZXRoZXIgb24gdGhlIHNhbWUgbGluZSB0aGU6DQoNCi0gbmFtZSBvZiB0aGUgb2JqZWN0DQotIG9wZXJhdG9yIGAkYA0KLSBuYW1lIG9mIHRoZSBjb2x1bW4NCg0KSGVyZSB0aGUgY29sdW1uIGBoZWlnaHRgIGNhbiBiZSBzZWxlY3RlZCB1c2luZzogYHN0dWRlbnRzJGhlaWdodGAuIFRoZSBzYW1lIGNvbHVtbiBjYW4gYmUgZXh0cmFjdGVkIHVzaW5nIHRoZSBzdWJzY3JpcHQgIHdoaWNoIGlzIGRlbm90ZWQgYnkgdGhlIHNxdWFyZSBicmFja2V0cyBhZnRlciB0aGUgb2JqZWN0IG5hbWUgYHN0dWRlbnRzWywxXWA6DQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCmNsYXNzKHN0dWRlbnRzJGhlaWdodCkNCmNsYXNzKHN0dWRlbnRzWywxXSkNCmBgYA0KDQpUaGlzIGNvbHVtbiBpcyBhbiBpbnRlZ2VyOiBhIHdob2xlIG51bWJlciAobm90IGEgZnJhY3Rpb25hbCBudW1iZXIpIHRoYXQgY2FuIGJlIHBvc2l0aXZlLCBuZWdhdGl2ZSwgb3IgemVyby4gVGhpcyBjYW4gYmUgY29udmVydGVkIGFzIGEgbnVtZXJpY2FsIHVzaW5nIHRoZSBmdW5jdGlvbjogYGFzLm51bWVyaWMnDQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCnN0dWRlbnRzJGhlaWdodDwtYXMubnVtZXJpYyhzdHVkZW50cyRoZWlnaHQpICMgYXNzaWduZWQgbnVtZXJpY2FsIHZhbHVlIHRvIHRoaXMgY29sdW1uDQpjbGFzcyhzdHVkZW50cyRoZWlnaHQpICMgY2hlY2sgdGhlIGNoYW5nZSB3YXMgbWFkZQ0KYGBgDQoNCkV4dHJhY3RpbmcgYSByb3cgY2FuIG9ibHkgYmUgYWNjb21wbGlzaGVkIHdpdGggYSBzdWJzZWNyaXB0LiBUaGVyZWZvcmUsIHRvIGV4dHJhY3QgdGhlIGZpcnN0IHJvdyBvZiBvdXIgZGF0YWZyYW1lOg0KDQpgYGB7ciwgIGV2YWw9RkFMU0V9DQpzdHVkZW50c1sxLF0gI2V4dHJhY3QgdGhlIGZpcnN0IHJvdyBvZiB0aGUgdGFibGUNCmBgYA0KDQpGb2xsb3dpbmcgdGhlIHNhbWUgbWV0aG9kcywgY2hlY2sgdGhlIHJlc3VsdHMgb2Y6IA0KDQpgYGB7ciwgIGV2YWw9RkFMU0V9DQpzdHVkZW50c1sxLDFdICMgZWxlbWVudCBpbiB0aGUgZmlyc3Qgcm93LCBmaXJzdCBjb2x1bW4NCnN0dWRlbnRzJGhlaWdodFsxXSAjIGZpcnN0IGVsZW1lbnQgaW4gb3VyIHZlY3RvciBoZWlnaHQNCmBgYA0KDQo8c3BhbiBzdHlsZT0iY29sb3I6IHJlZCI+QWx3YXlzIHJlbWVtYmVyIGBvYmplY3Rbbm8uIHJvdywgbm8uIGNvbHVtbl1gPC9zcGFuPg0KDQoNCiMjIFN1Yi1zZXR0aW5nDQoNClRoZSBwdXJwb3NlIGlzIHRvICBleHRyYWN0IGluZm9ybWF0aW9uIGZvbGxvd2luZyBhIGdpdmVuIGNvbmRpdGlvbi4gU3VjaCwgd2Ugb25seSB3YW50IHRvIHNlbGVjdCBmZW1hbGUgc3R1ZGVudHM6DQoNCjEuIEFkZCBhIGNvbmRpdGlvbiBhbmQgY2hlY2sgd2hldGhlciBvciBub3QgdGhlIG9ic2VydmF0aW9uIChyb3cpIGlzIGZvciBmZW1hbGUgc3R1ZGVudHM6DQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCnN0dWRlbnRzJGdlbmRlcj09ImZlbWFsZSIgIyBjaGVjayB3aGljaCBpbmZvcm1hdGlvbiBpcyBmb3IgZmVtYWxlDQpgYGANCg0KMi4gQ3JlYXRlIGEgZmlsdGVyLCBoZXJlIEkgY2FsbGVkIGl0IGBmYDogDQoNCmBgYHtyLCAgZXZhbD1GfQ0KZjwtc3R1ZGVudHMkZ2VuZGVyPT0iZmVtYWxlIiAjIGNyZWF0ZSBhICdmaWx0ZXInIGNhbGxlZCBmDQpgYGAgDQoNCjMuIEFwcGx5IG15IGZpbHRlciB1c2luZyBzdWJzcmlwdCwgSSB3YW50IHRvIGV4dHJhY3Qgb25seSB0aGUgcm93cyB0aGF0IGNvbnRhaW4gZGF0YSBmb3IgZmVtYWxlIHN0dWRlbnRzLiBJIHB1dCB0aGUgcmVzdWx0cyBpbiBhIG5ldyBvYmplY3QgY2FsbCBgZmVtYWxlYDoNCg0KYGBge3IsICBldmFsPUZ9DQpmZW1hbGVzPC1zdHVkZW50c1tmLF0gIyBmaWx0ZXIgb3VyICdzdHVkZW50cycgZGF0YXNldA0KZmVtYWxlcw0KYGBgDQoNCkl0IHNlbGVjdGVkIDUgc3R1ZGVudHMuIFRoZSBkaW1lbnNpb25zIG9mIG15IG5ldyBkYXRhIGZyYW1lIGlzIGEgdGFibGUgb2YgNSBvYnMuIGJ5IDQgY29sLiBDb2x1bW4gbmFtZXMgYGNvbG5hbWVzYCByZW1haW5lZCB1bmNoYW5nZWQsIGJ1dCBJIGhhdmUgbm93IG9ubHkgNSBuYW1lcyBmb3IgdGhlIHJvd3MgYHJvd25hbWVzYC4gSSBjYW4gcmVuYW1lIG15IGByb3duYW1lc2AgYnkgIGNvbWJpbmluZyBuYW1lcyBpbnRvIGEgdmVjdG9yICBgY2AuIA0KDQpgYGB7ciwgIGV2YWw9Rn0NCmRpbShmZW1hbGVzKSAjIHNpemUgb2YgbXkgbmV3IGRhdGEgZnJhbWUNCmNvbG5hbWVzKGZlbWFsZXMpICMgbmFtZXMgb2YgdGhlIGNvbHVtbnMNCnJvd25hbWVzKGZlbWFsZXMpICMgbmFtZXMgb2YgdGhlIHJvd3MNCnJvd25hbWVzKGZlbWFsZXMpPC1jKCdWYW5lc3NhJywgJ1ZpY2t5JywgJ01hcmlhbm5hJywgJ0pveWNlJywgJ1ZpY3RvcmlhJykNCmZlbWFsZXMNCmBgYCANCg0KPiAqPHNwYW4gc3R5bGU9ImNvbG9yOiBncmVlbiI+KipSUDIqKjogVXNpbmcgb3VyIGBpcmlzYCBkYXRhIHNldCwgY3JlYXRlIHRocmVlIGRpZmZlcmVudCBkYXRhIHNldCBjb3JyZXNwb25kaW5nIHRvIHRoZSB0aHJlZSBzcGVjaWVzIGRlc2lnbmF0ZWQgaW4gdGhlIGNvbHVtbiBgU3BlY2llc2A8L3NwYW4+KiANCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtaGlkZSIsICBldmFsPUZBTFNFfQ0KbGV2ZWxzKGlyaXMkU3BlY2llcykNCnNldGY8LWlyaXMkU3BlY2llcz09InNldG9zYSINCnNldG9zYTwtaXJpc1tzZXRmLF0NCnZlcmY8LWlyaXMkU3BlY2llcz09InZlcnNpY29sb3IiDQp2ZXJzaWNvbG9yPC1pcmlzW3ZlcmYsXSANCnZpcmY8LWlyaXMkU3BlY2llcz09InZpcmdpbmljYSINCnZpcmdpbmljYTwtaXJpc1t2aXJmLF0gDQpgYGANCg0KIyMgU2FtcGxlDQoNClRoZSBmdW5jdGlvbiBgc2FtcGxlYCBpcyB1c2VkIHRvIGdlbmVyYXRlIGEgc2FtcGxlIG9mIGEgc3BlY2lmaWMgc2l6ZSBmcm9tIGEgdmVjdG9yIG9yIGEgZGF0YXNldCwgZWl0aHJlIHdpdGggb3Igd2l0aG91dCByZXBsYWNlbWVudC4NCg0KVGhlIGJhc2ljIHN5bnRheCBvZiB0aGUgYHNhbXBsZWAgZnVuY3Rpb24gaXMgYXMgZm9sbG93czoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPUZBTFNFfQ0Kc2FtcGxlKGRhdGEsIHNpemUsIHJlcGxhY2UgPSBGQUxTRSwgcHJvYiA9IE5VTEwpDQojZ2V0IHNvdXJjZSBjb2RlDQojIFZpZXcoc2FtcGxlKSBPUiBnZXRBbnl3aGVyZShzYW1wbGUoKSkgDQpgYGANCg0KVG8gc2VsZWN0IHJhbmRvbWx5IHR3byBpbmRpdmlkdWFscyBpbiBvdXJgc3R1ZGVudHNgIGRhdGFzZXQsIEkgZmlyc3QgbmVlZCB0byBkZWZpbmUgdGhlIHNpemUgb2YgbXkgdGFyZ2V0LCBjcmVhdGUgYSBmaWx0ZXIgd2l0aCBteSByYW5kb20gc2VsZWN0aW9uIG9mIGluZGl2aWR1YWxzLCB0aGVuIGFwcGx5IG15IGZpbHRlciBvbiBteSBgc3R1ZGVudHNgIGRhdGFzZXQ6IA0KDQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCm5yb3coc3R1ZGVudHMpICMgbnVtYmVyIG9mIHJvd3MgaW4gc3R1ZGVudCwgc2FtZSBhcyBkaW0oc3R1ZGVudHMpWzFdIA0KMTpucm93KHN0dWRlbnRzKSAjIGNyZWF0ZSBhIHZlY3RvciBmcm9tIDEgdG8gbnJvdyhzdHVkZW50cykgb2JzZXJ2YXRpb246IDEwDQpzdHVmPC1zYW1wbGUoMTpucm93KHN0dWRlbnRzKSwgMikgIyBmaWx0ZXIgcmFuZG9ubHkgMiBzdHVkZW50cyBvbiBteSAxMCBzdHVkZW50cw0Kc3R1ZiAjIG15IHR3byBzdHVkZW50cw0Kc3R1ZGVudHNbc3R1ZixdICMgYXBwbHkgbXkgZmlsdGVyDQpgYGANCg0KDQojIyBTb3J0aW5nDQoNClNvcnRpbmcgYSBkYXRhIGZyYW1lIGlzIGRvbmUgYnkgY29tYmluaW5nIGNvbW1hbmQgYG9yZGVyYCB3aXRoIGEgc3Vic2NyaXB0LiBMaWtlIGZvciBzdWItc2V0dGluZywgd2UgZmlyc3QgbmVlZCB0byBjcmVhdGUgYSB2ZWN0b3IgdGhhdCB3aWxsIHRlbGwgaW50byB3aGljaCBvcmRlciB0aGUgcm93cyBvZiB0aGUgdGFibGUgbmVlZCB0byBiZSBhcnJhbmdlZDoNCg0KYGBge3IsICBldmFsPUZBTFNFfQ0KaW5kMTwtb3JkZXIgKHN0dWRlbnRzJGhlaWdodCApICMgY3JlYXRlIHRoZSB2ZWN0b3Igb2Ygb3JkZXI6IGluZDENCnJvd25hbWVzKHN0dWRlbnRzKSAjIHRoZSBmaXJzdCBpbmQgJzEgfCBoZWlnaHQgMTY3JyBzaG91bGQgbW92ZSBhdCBwb3NpdGlvbiA1DQpzdHVkZW50cyBbaW5kMSxdICMgc29ydGluZyBteSBkYXRhIHdpdGggbXkgdmVjdG9yIG9mIG9yZGVyLCBjaGVjayBpbmQuMSBpcyBhdCBwb3NpdGlvbiA1IA0KYGBgDQoNCkFsbCBjYW4gYmUgY29tYmluZWQgaW50byAxIGxpbmUsIHdpdGhvdXQgY3JlYXRpbmcgYSB2ZWN0b3Igb3JkZXI6DQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCnN0dWRlbnRzW29yZGVyKHN0dWRlbnRzJGhlaWdodCksXQ0KYGBgDQoNCllvdSBjYW4gbm93IGd1ZXNzIHdoYXQgdGhlIGZvbGxvd2luZyB2ZWN0b3JzIHdpbGwgZG86IA0KDQpgYGB7ciwgIGV2YWw9RkFMU0V9DQppbmQyPC1vcmRlcigtc3R1ZGVudHMkaGVpZ2h0KQ0KaW5kMzwtb3JkZXIoc3R1ZGVudHMkaGVpZ2h0LGRlY3JlYXNpbmcgPVQpDQpgYGANCg0KIyMgUmVjb2RpbmcNCg0KUmVjb2RpbmcgaXMgcmVwbGFjaW5nIHZhbHVlcyB3aXRoIG5ldyBvbmVzLiBWYWx1ZXMgaW4gYSB2YXJhaWJsZSBjYW4gYmUgcmVjb2RlZCB1c2luZyB0aGUgY29tbWFuZCBgaWZlbHNlYC4gTGUncyByZWNvZGUgb3VyIGBnZW5kZXJgIHZhcmlhYmxlIHdpdGggZGlmZmVyZW50IGNvbG9ycyBpbiBvcmRlciB0byBoYXZlIG1hbGU9Ymx1ZSBhbmQgZmVtYWxlPXJlZC4gTm90ZSAnZXF1YWwgdG8nIGlzIGdpdmVuIHdpdGggdGhlIG9wZXJhdG9yIGA9PWAgDQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCmNvbG9yczwtaWZlbHNlKHN0dWRlbnRzJGdlbmRlcj09J21hbGUnLCAnYmx1ZScsJ3JlZCcpICMgaWYgY29uZGl0aW9uIGlzIHRydWUgaXQgd2lsbCB0YWtlIHRoZSB2YWx1ZSAnYmx1ZScsIGlmIG5vdCB0aGUgdmFsdWUgJ3JlZCcgDQpgYGANCg0KWW91IGNhbiBjcmVhdGUgYW4gbmV3IGNvbHVtbjoNCg0KYGBge3IsICBldmFsPUZBTFNFfQ0Kc3R1ZGVudHMkY29sb3JzPC1pZmVsc2Uoc3R1ZGVudHMkZ2VuZGVyPT0nbWFsZScsJ2JsdWUnLCdyZWQnKSAjIGNyZWF0ZSBhIG5ldyBjb2x1bW4NCmBgYA0KDQpPciByZXBsYWNlIHRoZSBleGlzdGluZyBvbmU6IA0KDQpgYGB7ciwgIGV2YWw9RkFMU0V9DQpzdHVkZW50cyRnZW5kZXI8LWlmZWxzZShzdHVkZW50cyRnZW5kZXI9PSdtYWxlJywgJ2JsdWUnLCdyZWQnKSAjIHJlcGxhY2UgYW4gZXhpc3RpbmcgY29sdW1uDQpgYGANCg0KTW9yZSBvcGVyYXRvcnMsIHdoaWNoIGNhbiBiZSBjb21iaW5lZCB0b2dldGhlcjoNCg0KYD09YCBlcXVhbCB0byANCg0KYD49YCBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4NCg0KYDw9YCBlcXVhbCB0byBvciBsZXNzIHRoYW4NCg0KYCE9YCBub3QgZXF1YWwgdG8NCg0KYCZgIGFuZA0KDQpgfGAgb3INCg0KYGBge3IsICBldmFsPUZ9DQpzdHVkZW50cyRoZWlnaHQgPD0gMTY1ICMgc3R1ZGVudHMgc2hvcnRlciBvciBlcXVhbCB0byAxNjUgY20NCnN0dWRlbnRzJHNob2VzaXplIDwgMzcgIyBzdHVkZW50cyB3aXRoIHNob2VzIHNpemUgbGVzcyB0aGFuIDM3DQpzdHVkZW50cyRoZWlnaHQgPD0gMTY1ICYgc3R1ZGVudHMkc2hvZXNpemUgPCAzNyAjIHN0dWRlbnRzIHdpdGggaGVpZ2h0IGFuZCBzaG9lcyBzaXplIDwzNw0Kc3R1ZGVudHMkZHVhbC5jb25kPC1pZmVsc2Uoc3R1ZGVudHMkaGVpZ2h0PD0xNjUgJiBzdHVkZW50cyRzaG9lc2l6ZTwzNywnYmx1ZScsJ3JlZCcpICMgVXNlIHdpdGggaWZlbHNlKCkNCnN0dWRlbnRzICMgb25seSBvbmUgc3R1ZGVudCBmb2xsb3cgdGhlIHR3byBjb25kaXRpb25zDQpgYGANCg0KDQo+ICo8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4qKlJQMyoqOiBSZXZlcnNlIHZhcmlhYmxlIGBnZW5kZXJgIHdpdGggYG1hbGVgIGFuZCBgZmVtYWxlYCBieSByZXBsYWNpbmcgY29sb3IgbmFtZXMuIERlbGV0ZSBleHRyYSB2YXJpYWJsZXMgY3JlYXRlZCB0byBjb21lIGJhY2sgdG8gb3VyIG9yaWduYWwgdGFibGUgKHRoZSB2YXJpYWJsZSByZWNlaXZlZCBgTlVMTGApLiBVc2luZyB0aGUgYGlyaXNgIGRhdGFzZXQgY3JlYXRlIGEgbmV3IHZhcmlhYmxlIHdpdGggZmxvd2VyIGNvbG9ycy4gSXJpcyBzZXRvc2EgaXMgcHVycGxlLklyaXMgdmVyc2ljb2xvciBpcyBibHVlLiBJcmlzIHZpcmdpbmljYSBpcyBwaW5rLiBTb3J0IGluZGl2aWR1YWxzIGJ5IGRlY3JlYXNpbmcgYFNlcGFsLldpZHRoYC4gSHlwb3RoZXNpemUgb24gdGhlIHVzZSBvZiB0aGlzIHRyYWl0IHRvIGRpc2NyaW1pbmF0ZSB0aGUgc3BlY2llcy48L3NwYW4+KiANCg0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUiLCAgZXZhbD1GQUxTRX0NCiNgc3R1ZGVudHNgIGRhdGFzZXQNCnN0dWRlbnRzJGdlbmRlcjwtaWZlbHNlKHN0dWRlbnRzJGdlbmRlcj09J2JsdWUnLCdtYWxlJywnZmVtYWxlJykNCnN0dWRlbnRzJGNvbG9yczwtTlVMTA0Kc3R1ZGVudHMkZHVhbC5jb25kPC1OVUxMDQoNCiMgYGlyaXNgIGRhdGFzZXQNCmlyaXMkY29sb3JzPC1pZmVsc2UoaXJpcyRTcGVjaWVzPT0nc2V0b3NhJywncHVycGxlJywgaWZlbHNlKGlyaXMkU3BlY2llcz09J3ZlcnNpY29sb3InLCdibHVlJywncGluaycpKQ0KaXJpc1tvcmRlcihpcmlzJFNlcGFsLldpZHRoLCBkZWNyZWFzaW5nID0gVCksXQ0KYGBgDQoNCiMjIFBhY2thZ2UgYGRwbHlyYCANCg0KU28gZmFyZSB3ZSB1c2VkIGZ1bmN0aW9ucyBpbiBiYXNlLiBPdGhlciB1c2VmdWwgZnVuY3Rpb25zYHN1YnNldGAsIGB3aXRoYCwgYHdpdGhpbmAsIGV0Yy4gUGFja2FnZXMgbGlrZSBgZGF0YS50YWJsZWAsIGBnZ3Bsb3QyYCwgYHJlc2hhcGUyYCwgZXRjLiBhbHNvIG9mZmVyIHVzdWVmdWwgZnVuY3Rpb25zLiBgZHBseXJgIHBhY2thZ2UgaXMgIGRlZGljYXRlZCBmb3IgbWFuaXB1bGF0aW5nIHRoZSBkYXRhIGluIFIgd2l0aCBtYW55IGNvbW1vbiBmdW5jdGlvbnMgdG8gZmFzdGVuIHRoZSBkYXRhIGV4cGxvcmF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU29tZSBpbXBvcnRhbnQgZnVuY3Rpb25zIGluY2x1ZGVkIGluIHRoZSBgZHBseXJgIHBhY2thZ2VzOg0KDQoNCisgYHNlbGVjdGAgdG8gc2VsZWN0IGNvbHVtbnMgKHZhcmlhYmxlcykNCisgYGZpbHRlcmAgdG8gZmlsdGVyIChzdWJzZXQpIHJvd3MNCisgYG11dGF0ZWAgdG8gY3JlYXRlIG5ldyB2YXJpYWJsZXMNCisgYHN1bW1hcmlzZWAgdG8gc3VtbWFyaXplIChvciBhZ2dyZWdhdGUpIGRhdGENCisgYGdyb3VwX2J5YCB0byBncm91cCBkYXRhDQorIGBhcnJhbmdlYCB0byBzb3J0IGRhdGENCisgYGpvaW5gIHRvIGpvaW4gZGF0YSBmcmFtZXMNCg0KDQojIyMgYHNlbGVjdGANCg0KSXQgaXMgdXNlZCB0byBzZWxlY3QgZGF0YSBieSBpdHMgY29sdW1uIG5hbWUuIFdlIGNhbiBzZWxlY3QgYW55IG51bWJlciBvZiBjb2x1bW5zIGluIGEgbnVtYmVyIG9mIHdheXMuIEZvciBleGFtcGxlOg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9RkFMU0V9DQpsaWJyYXJ5IChkcGx5cikNCnNlbGVjdGVkIDwtIHNlbGVjdChpcmlzLCBTZXBhbC5MZW5ndGgsIFNlcGFsLldpZHRoLCBQZXRhbC5MZW5ndGgpICNUbyBzZWxlY3QgdGhlIGZvbGxvd2luZyBjb2x1bW5zDQpoZWFkKHNlbGVjdGVkKSAjIHByaW50IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGRhdGEgc2V0IGNyZWF0ZWQNCnNlbGVjdGVkMSA8LSBzZWxlY3QoaXJpcywgU2VwYWwuTGVuZ3RoOlBldGFsLkxlbmd0aCkgI1RvIHNlbGVjdCBhbGwgY29sdW1ucyBmcm9tIFNlcGFsLkxlbmd0aCB0byBQZXRhbC5MZW5ndGgNCmhlYWQoc2VsZWN0ZWQxLCA0KSAjVG8gcHJpbnQgZmlyc3QgZm91ciByb3dzIG9mIHRoZSBkYXRhIHNldCBjcmVhdGVkICAgICAgICAgICAgICAgICAgICAgICANCnNlbGVjdGVkMSA8LSBzZWxlY3QoaXJpcyxjKDM6NSkpICNUbyBzZWxlY3QgY29sdW1ucyB3aXRoIG51bWVyaWMgaW5kZXhlcw0KaGVhZChzZWxlY3RlZDEpDQpgYGANCg0KV2UgdXNlZCBgLWAgdG8gaGlkZSBhIHBhcnRpY3VsYXIgY29sdW1uDQoNCmBgYHtyLCAgZXZhbD1GfQ0Kc2VsZWN0ZWQgPC0gc2VsZWN0KGlyaXMsIC1TZXBhbC5MZW5ndGgsIC1TZXBhbC5XaWR0aCkNCmhlYWQoc2VsZWN0ZWQpDQpgYGANCg0KIyMjIGBmaWx0ZXJgDQoNCkl0IGlzIHVzZWQgdG8gZmluZCByb3dzIHdpdGggbWF0Y2hpbmcgY3JpdGVyaWEuIEl0IGFsc28gd29ya3MgbGlrZSB0aGUgc2VsZWN0KCkgZnVuY3Rpb24sIGkuZS4sIHdlIHBhc3MgYSBkYXRhIGZyYW1lIGFsb25nIHdpdGggYSBjb25kaXRpb24gc2VwYXJhdGVkIGJ5IGEgY29tbWEuIEZvciBleGFtcGxlOg0KDQpgYGB7ciwgIGV2YWw9Rn0NCiNUbyBzZWxlY3QgdGhlIGZpcnN0IDMgcm93cyB3aXRoIFNwZWNpZXMgYXMgc2V0b3NhDQpmaWx0ZXJlZCA8LSBmaWx0ZXIoaXJpcywgU3BlY2llcyA9PSAic2V0b3NhIiApDQpoZWFkKGZpbHRlcmVkLDMpDQpgYGANCg0KQW5kIGZvciBkdWFsIGNvbmRpdGlvbnM6DQoNCmBgYHtyLCAgZXZhbD1GfQ0KI1RvIHNlbGVjdCB0aGUgbGFzdCA1IHJvd3Mgd2l0aCBTcGVjaWVzIGFzIHZlcnNpY29sb3IgYW5kIFNlcGFsIHdpZHRoIG1vcmUgdGhhbiAzDQpmaWx0ZXJlZDEgPC0gZmlsdGVyKGlyaXMsIFNwZWNpZXMgPT0gInZlcnNpY29sb3IiLCBTZXBhbC5XaWR0aCA+IDMpDQp0YWlsKGZpbHRlcmVkMSkNCmBgYA0KDQojIyMgYG11dGF0ZWANCg0KSXQgY3JlYXRlcyBuZXcgY29sdW1ucyBhbmQgcHJlc2VydmVzIHRoZSBleGlzdGluZyBjb2x1bW5zIGluIGEgZGF0YXNldC4gRm9yIGV4YW1wbGU6DQoNCmBgYHtyLCAgZXZhbD1GfQ0KI1RvIGNyZWF0ZSBhIGNvbHVtbiDigJxHcmVhdGVyLkhhbGbigJ0gd2hpY2ggc3RvcmVzIFRSVUUgaWYgZ2l2ZW4gY29uZGl0aW9uIGlzIFRSVUUNCmNvbDEgPC0gbXV0YXRlKGlyaXMsIEdyZWF0ZXIuSGFsZiA9IFNlcGFsLldpZHRoID4gMC41ICogU2VwYWwuTGVuZ3RoKQ0KdGFpbChjb2wxKQ0KYGBgDQoNClRvIGNoZWNrIGhvdyBtYW55IGZsb3dlciBzYXRpc2Z5IHRoaXMgY29uZGl0aW9uLCB0aGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBgdGFibGV7YmFzZX1gIGlzIGEgY29udGluZ2VuY3kgdGFibGU6DQoNCmBgYHtyLCAgZXZhbD1GfQ0KdGFibGUoY29sMSRHcmVhdGVyLkhhbGYpDQpgYGANCg0KIyMjIGBhcnJhbmdlYA0KDQpJdCBpcyB1c2VkIHRvIHNvcnQgcm93cyBieSB2YXJpYWJsZXMgaW4gYm90aCBhbiBhc2NlbmRpbmcgYW5kIGRlc2NlbmRpbmcgb3JkZXIuIEZvciBleGFtcGxlOg0KDQpgYGB7ciwgIGV2YWw9Rn0NCiNUbyBhcnJhbmdlIFNlcGFsIFdpZHRoIGluIGFzY2VuZGluZyBvcmRlcg0KYXJyYW5nZWQgPC0gYXJyYW5nZShjb2wxLCBTZXBhbC5XaWR0aCkNCmhlYWQoYXJyYW5nZWQpDQojVG8gYXJyYW5nZSBTZXBhbCBXaWR0aCBpbiBkZXNjZW5kaW5nIG9yZGVyDQphcnJhbmdlZCA8LSBhcnJhbmdlKGNvbDEsIGRlc2MoU2VwYWwuV2lkdGgpKQ0KaGVhZChhcnJhbmdlZCkNCmBgYA0KDQojIyMgYHN1bW1hcmlzZWANCg0KDQpJdCBpcyB1c2VkIHRvIGZpbmQgaW5zaWdodHMobWVhbiwgbWVkaWFuLCBtb2RlLCBldGMuKSBmcm9tIGEgZGF0YXNldC4gSXQgcmVkdWNlcyBtdWx0aXBsZSB2YWx1ZXMgZG93biB0byBhIHNpbmdsZSB2YWx1ZS4gRm9yIGV4YW1wbGU6DQoNCmBgYHtyLCAgZXZhbD1GfQ0Kc3VtbWFyaXNlZCA8LSBzdW1tYXJpc2UoYXJyYW5nZWQsIE1lYW4uV2lkdGggPSBtZWFuKFNlcGFsLldpZHRoKSkNCmhlYWQoc3VtbWFyaXNlZCkNCmBgYA0KDQojIyMgYGdyb3VwX2J5YA0KDQpJdCBpcyBkb25lIHRvIGdyb3VwIG9ic2VydmF0aW9ucyB3aXRoaW4gYSBkYXRhc2V0IGJ5IG9uZSBvciBtb3JlIHZhcmlhYmxlcy4gTW9zdCBkYXRhIG9wZXJhdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiBncm91cHMgZGVmaW5lZCBieSB2YXJpYWJsZXMuIEZvciBleGFtcGxlOg0KDQpgYGB7ciwgIGV2YWw9Rn0NCiNUbyBmaW5kIG1lYW4gc2VwYWwgd2lkdGggYnkgU3BlY2llcywgd2UgdXNlIGdyb3VwaW5nIGFzIGZvbGxvd3MNCmdwIDwtIGdyb3VwX2J5KGlyaXMsU3BlY2llcykNCm1uIDwtIHN1bW1hcmlzZShncCxNZWFuLlNlcGFsID0gbWVhbihTZXBhbC5XaWR0aCkpDQptbg0KYGBgDQoNCiMjIFBpcGUgb3BlcmF0b3INCg0KUGlwZSBvcGVyYXRvciBsZXRzIHVzIHdyYXAgbXVsdGlwbGUgZnVuY3Rpb25zIHRvZ2V0aGVyLiBJdCBpcyBkZW5vdGVkIGFzIGAlPiVgLiBJdCBjYW4gYmUgdXNlZCB3aXRoIGZ1bmN0aW9ucyBsaWtlIGBmaWx0ZXJgLCBgc2VsZWN0YCwgYGFycmFuZ2VgLCBgc3VtbWFyaXNlYCwgYGdyb3VwX2J5YCwgZXRjLiBGb3IgZXhhbXBsZToNCg0KYGBge3IsICBldmFsPUZ9DQojVG8gZ2V0IHJvd3Mgd2l0aCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMNCmlyaXMgJT4lIGZpbHRlcihTcGVjaWVzID09ICJzZXRvc2EiLFNlcGFsLldpZHRoID4gMy44KQ0KYGBgDQoNClRvIGZpbmQgbWVhbiBTZXBhbCBMZW5ndGggYnkgU3BlY2llcywgd2UgdXNlIHBpcGUgb3BlcmF0b3IgYXMgZm9sbG93czoNCg0KYGBge3IsICBldmFsPUZ9DQppcmlzICAlPiUgZ3JvdXBfYnkoU3BlY2llcykgJT4lIHN1bW1hcmlzZShNZWFuLkxlbmd0aCA9IG1lYW4oU2VwYWwuTGVuZ3RoKSkNCmBgYA0KDQoNCj4gKjxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW4iPiAqKkNoYWxsZW5nZSoqOiB0aGUgZGF0YSBzZXQgYHJhaXJ1b2hvYHByb3ZpZGVzIGdyb3d0aCBkYXRhIGZvciA4IGRheXMgaW4gZGlmZmVyZW50IHRyZWF0bWVudHMuIFJlZm9ybWF0IHRoZSB0YWJsZSBpbiBvcmRlciB0byBoYXZlIHRoZSBgZGF5YCBhcyBhIHZhcmlhYmxlIHdpdGggNiBsZXZlbHMgdG9nZXRoZXIgd2l0aCBhbm90aGVyIHZhcmlhYmxlIGNhbGxlZCBsZW5ndGguIFlvdSBtYXkgdXNlIGFub3RoZXIgZmFtb3VzIHBhY2thZ2UgZm9yIGRhdGEgbWFuaXB1bGF0aW9uIGB0aWR5cmAgYW5kIHRoZSBmdW5jdGlvbiBgZ2F0aGVyKClgLiBDdXJyZW50IHZhcmlhYmxlcyBhcmUgZ2l2ZW4gYXM6PC9zcGFuPiogDQoNCio8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4tIGBkYXkzYCB0byBgZGF5OGA6ICBtZWFuIGxlbmd0aCBvZiB0aGUgZ3Jhc3MgYXQgdGhlIGdpdmVuIGRheSA8L3NwYW4+Kg0KDQoqPHNwYW4gc3R5bGU9ImNvbG9yOiBncmVlbiI+LSBgZGF5M2AgdG8gYGRheThgOiAgbWVhbiBsZW5ndGggb2YgdGhlIGdyYXNzIGF0IHRoZSBnaXZlbiBkYXkgPC9zcGFuPioNCg0KKjxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW4iPi0gYGdlcm1pbmF0ZWA6ICBuby4gb2YgZ2VybWluYXRlZCBzZWVkcyA8L3NwYW4+Kg0KDQoqPHNwYW4gc3R5bGU9ImNvbG9yOiBncmVlbiI+LSBgYmVkYDogd2hlcmUgdGhlIGdyYXNzIHdhcyBncm93aW5nLCA0IGxldmVsczogdGhpbiAobW91bGQxKSwgICB0aGljayAobW91bGQyKSBtb3VsZCwgdGhpbiAocGFwZXI0KSBhbmQgdGhpY2sgKHBhcGVyOCkgcGFwZXIgPC9zcGFuPioNCg0KKjxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW4iPi0gYHRyZWF0ZW1lbnRgOiB3YXRlcmluZyBzY2hlbWUsIDIgbGV2ZWxzOiBlaXRoZXIgcHVyZSB3YXRlciBvciB3YXRlciB3aXRoIG51dHJpZW50cyA8L3NwYW4+Kg0KDQoqPHNwYW4gc3R5bGU9ImNvbG9yOiBncmVlbiI+LSBgdHJlYXRlbWVudGA6IHdhdGVyaW5nIHNjaGVtZSwgMiBsZXZlbHM6IGVpdGhlciBwdXJlIHdhdGVyIG9yIHdhdGVyIHdpdGggbnV0cmllbnRzIDwvc3Bhbj4qDQoNCio8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4tIGBzcGF0aWFsMWA6IHZlcnRpY2FsIGxvY2F0aW9uIG9mIHRoZSBwbG90IDwvc3Bhbj4qDQoNCio8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4tIGBzcGF0aWFsMmA6IGhvcml6b250YWwgbG9jYXRpb24gb2YgdGhlIHBsb3QgPC9zcGFuPioNCg0KKjxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW4iPmV4dHJhIHZhcmlhYmxlIGByb3dgIGFuZCBgY29sdW1uYCBjYW4gYmUgcmVtb3ZlZDwvc3Bhbj4qDQoNCmBgYHtyLCAgZXZhbD1GQUxTRX0NCnJhaXJ1b2hvPC1yZWFkLnRhYmxlKCdEYXRhL3JhaXJ1b2hvLnR4dCcsaGVhZGVyPVQsIHNlcD0iXHQiLCBkZWM9Ii4iKQ0KaGVhZChyYWlydW9obykNCmBgYA0KDQojIyBQYWNrYWdlIGB0aWR5cmAgDQoNClRoZSBmdW5jdGlvbiBgZ2F0aGVyYCBpcyBkZXByZWNpYXRlZCAoSSBhbSBnZXR0aW5nIG9sZGVyIGFuZCBJIGtlZXAgdXNpbmcgb2xkIGZ1bmN0aW9uKSwgYW5kIGl0IGlzIG5vdyByZWNvbW1lbmRlZCB0byBzd2l0Y2ggdG8gYHBpdm90X2xvbmdlcigpYCBzdGlsbCB1bmRlciBhY3RpdmUgZGV2ZWxvcG1lbnQ6IGBkZiAlPiUgZ2F0aGVyKCJrZXkiLCAidmFsdWUiLCB4LCB5LCB6KWBpcyBlcXVpdmFsZW50IHRvIGBkZiAlPiUgcGl2b3RfbG9uZ2VyKGMoeCwgeSwgeiksIG5hbWVzX3RvID0gImtleSIsIHZhbHVlc190byA9ICJ2YWx1ZSIpYA0KDQoNCkRhdGEgdGFibGVzIGNvbWUgaW4gZGlmZmVyZW50IHNpemVzIGFuZCBzaGFwZTsgdGhleSBjYW4gYmUgYSB2ZXJ5IHNpbXBsZSB0d28gY29sdW1uIGRhdGFzZXQgb3IgdGhleSBjYW4gY29uc2lzdCBvZiBtYW55IGNvbHVtbnMgYW5kIOKAnHN1Yi1jb2x1bW5z4oCdLiBVbmRlcnN0YW5kaW5nIGl0cyBzdHJ1Y3R1cmUsIGFuZCBsZWFybmluZyBob3cgdG8gcmVzaGFwZSBpdCBpbnRvIGEgd29ya2FibGUgZm9ybSBpcyBjcml0aWNhbCB0byBhbiBlZmZlY3RpdmUgYW5kIGVycm9yIGZyZWUgYW5hbHlzaXMuIFRoZSBwcmV2aW91cyBleGFtcGxlIGlsbHVzdHJhdGVzIHRoZSB1c2Ugb2YgdGhlIHBhY2thZ2UgYHRpZHlyYCBpbiB0aWR5aW5nIG9yIHJlc2hhcGluZyB0YWJsZXMuIFRoaXMgcGFja2FnZSBpcyB0aGUgcGFja2FnZSBieSBleGNlbGxlbmNlIHRvIHJlb3JnYW5pemUgdGhlIHN0cnVjdHVyZSBvZiBhIHRhYmxlLiANCg0KIyMjIFBpdm90IGRhdGENCg0KRGFpICYgSG9ybmcgKDIwMDkpIHN1bW1hcml6ZSB0aGUgY29yYWwgZGl2ZXJzaXR5IGFyb3VuZCBUYWl3YW4uIGBUV19jb3JhbHNgIGRpc3BsYXlzIHNjbGVyYWN0aW5pYW4gY29yYWwgcmljaG5lc3MgYnkgY29yYWwgcmVlZiByZWdpb25zOg0KDQpgYGB7ciwgIGV2YWw9VH0NClRXX2NvcmFsczwtcmVhZC50YWJsZSgnRGF0YS90d19jb3JhbHMudHh0JyxoZWFkZXI9VCwgc2VwPSJcdCIsIGRlYz0iLiIpDQpUV19jb3JhbHMNCmBgYA0KDQpUaGlzIHdpZGUgdGFibGUgY2FuIGJlIGVhc2lseSByZWZvcm1hdCBpbnRvIGEgbG9uZyB0YWJsZSBhcyB3ZSBkaWQgYmVmb3JlOg0KDQpgYGB7ciwgIGV2YWw9VH0NCmxpYnJhcnkodGlkeXIpDQpUV19jb3JhbHNfbG9uZyA8LSBUV19jb3JhbHMgJT4lIHBpdm90X2xvbmdlcihTb3V0aGVybl9UVzpOb3J0aGVybl9JcywgbmFtZXNfdG8gPSAiUmVnaW9uIiwgdmFsdWVzX3RvID0gIlJpY2huZXNzIikNClRXX2NvcmFsc19sb25nIDwtVFdfY29yYWxzICU+JSBwaXZvdF9sb25nZXIoY29scyA9IGV2ZXJ5dGhpbmcoKSwgbmFtZXNfdG8gPSAiUmVnaW9uIiwgdmFsdWVzX3RvID0gIlJpY2huZXNzIikNClRXX2NvcmFsc19sb25nIA0KYGBgDQoNClRoZSByZXZlcnNlIG9wZXJhdGlvbiBjYW4gYmUgbWFkZSB1c2luZyBgcGl2b3Rfd2lkZXJgOiANCg0KYGBge3IsICBldmFsPVR9DQpUV19jb3JhbHNfd2lkZSA8LSBwaXZvdF93aWRlcihUV19jb3JhbHNfbG9uZywgbmFtZXNfZnJvbSA9IFJlZ2lvbiwgdmFsdWVzX2Zyb20gPSBSaWNobmVzcykgDQpUV19jb3JhbHNfd2lkZQ0KYGBgDQoNCldl4oCZdmUgbm93IHJlY3JlYXRlZCB0aGUgd2lkZSB2ZXJzaW9uIG9mIG91ciB0YWJsZS4NCg0KPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPioqTm90ZSoqOiBUaGUgcGlwZSBvcGVyYXRvciBgJT4lYCBpcyBvcHRpb25hbCwgYnV0IGl0IGlzIGdlbmVyYWxseSBtb3JlIGVsZWdhbnQgYW5kIHlvdSB3aWxsIGRpc2NvdmVyIGl0cyBpbXBvcnRhbmNlIGxhdGVyIHdoZW4geW91ciBjb2Rpbmcgc2tpbGxzIGFyZSBtYXR1cmluZy48L3NwYW4+DQoNCiMjIyBBZHZhbmNlZCBwaXZvdCBvcHRpb25zDQoNCkhlcmXigJlzIGEgc3Vic2V0IG9mIG1lZGlhbiBpbmNvbWUgYnkgc2V4IGFuZCBieSB3b3JrIGV4cGVyaWVuY2UgZm9yIDIwMTcgaW4gZm91ciBzdGF0ZXMgaW4gVVMgYW5kIFRhaXdhbiAocmVhbCBkYXRhKS4NCg0KYGBge3IsICBldmFsPVR9DQppbmNvbWU8LXJlYWQudGFibGUoJ0RhdGEvbWV0b28udHh0JyxoZWFkZXI9VCwgc2VwPSJcdCIsIGRlYz0iLiIsIG5hLnN0cmluZ3MgPSAibi9hIikNCmluY29tZQ0KYGBgDQoNCkF0IGZpcnN0IGdsYW5jZSwgaXQgbWlnaHQgc2VlbSB0aGF0IHdlIGhhdmUgdGhyZWUgdmFyaWFibGVzIGFzIGluIHRoZSBlYXJsaWVyIGV4YW1wbGUsIGJ1dCB1cG9uIGNsb3NlciBleGFtaW5hdGlvbiwgd2Ugc2VlIHRoYXQgd2UgY2FuIHRlYXNlIG91dCB0d28gdmFyaWFibGVzIGZyb20gdGhlIGNvbHVtbiBuYW1lczogc2V4IChgbWFsZWAgYW5kIGBmZW1hbGVgKSBhbmQgd29yayBleHBlcmllbmNlIChgZnVsbHRpbWVgIGFuZCBgb3RoZXJgKS4NCg0KYHBpdm90X2xvbmdlcmAgaGFzIGFuIGFyZ3VtZW50LCBgbmFtZXNfc2VwYCwgdGhhdCBpcyBwYXNzZWQgdGhlIGNoYXJhY3RlciB0aGF0IGlzIHVzZWQgdG8gZGVsaW1pdCB0aGUgdHdvIHZhcmlhYmxlIHZhbHVlcy4gSW4gb3VyIGV4YW1wbGUsIHRoaXMgY2hhcmFjdGVyIGlzIGBfYC4gU2luY2UgdGhlIGNvbHVtbiB2YWx1ZXMgd2lsbCBiZSBzcGxpdCBhY3Jvc3MgdHdvIHZhcmlhYmxlcyB3ZSB3aWxsIGFsc28gbmVlZCB0byBwYXNzIHR3byBjb2x1bW4gbmFtZXMgdG8gdGhlIGBuYW1lc190b2AgYXJndW1lbnQuDQoNCmBgYHtyLCAgZXZhbD1UfQ0KaW5jb21lX2xvbmcgPC0gaW5jb21lICU+JSAgcGl2b3RfbG9uZ2VyKGNvbHMgPSAtc3RhdGUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzX3RvID0gYygic2V4Iiwid29yayIpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc19zZXAgPSAiXyIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc190byA9ICJpbmNvbWUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgIA0KaW5jb21lX2xvbmcNCmBgYA0KDQpPYnZpb3VzbHksIHRoZSByZXZlcnNlIGlzIHBvc3NpYmxlOg0KDQpgYGB7ciwgIGV2YWw9VH0NCmluY29tZV9sb25nICU+JSBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gYyhzZXgsd29yayksIA0KICAgICAgICAgICAgdmFsdWVzX2Zyb20gPSBpbmNvbWUsDQogICAgICAgICAgICBuYW1lc19zZXAgPSAiLiIpDQpgYGANCg0KIyMjIFNlcGFyYXRpbmcgZWxlbWVudHMNCg0KVGhlIGB0aWR5cmAgcGFja2FnZSBvZmZlcnMgb3RoZXIgZnVuY3Rpb25zIG5vdCBkaXJlY3RseSB0aWVkIHRvIHBpdm90aW5nLiBGb3IgZXhhbXBsZSwgdG8gc3BsaXQgYSBjb2x1bW4gaW50byB0d28gb3IgbW9yZSBjb2x1bW5zIGJhc2VkIG9uIGEgY29sdW1u4oCZcyBkZWxpbWl0ZWQgdmFsdWUsIHVzZSB0aGUgYHNlcGFyYXRlYCBmdW5jdGlvbi4NCg0KYGBge3IsICBldmFsPVR9DQojIExldCdzIGZpcnN0IGNyZWF0ZSBhIGRlbGltaXRlZCB0YWJsZQ0KaW5jb21lLmxvbmcgPC0gaW5jb21lICU+JSAgcGl2b3RfbG9uZ2VyKGNvbHMgPSAtMSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNfdG8gPSAidmFyMSIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc190byA9ICJpbmNvbWUiKQ0KaW5jb21lLmxvbmcNCmBgYA0KDQpgYGB7ciwgIGV2YWw9VH0NCiMgU3BsaXQgdmFyMSBjb2x1bW4gaW50byB0d28gY29sdW1ucw0KaW5jb21lLnNlcCA8LSBpbmNvbWUubG9uZyAlPiUgIHNlcGFyYXRlKGNvbCA9IHZhcjEsIA0KICAgICAgICAgICAgICAgICAgICBzZXAgPSAiXyIsIA0KICAgICAgICAgICAgICAgICAgICBpbnRvID0gYygic2V4IiwgIndvcmsiKSkNCmluY29tZS5zZXANCmBgYA0KDQojIyMgU3BsaXR0aW5nIHJvd3MgDQoNCmBgYHtyLCAgZXZhbD1UfQ0KaW5jb21lLmxvbmcgJT4lIHNlcGFyYXRlX3Jvd3ModmFyMSwgc2VwID0gIl8iKQ0KYGBgDQoNCk90aGVyIGZ1bmN0aW9ucyBmcm9tIHRoZSBgdGlkeXJgIHBhY2thZ2UgYWxsb3cgdG8gKGNoZWNrIGhlbHAgb2YgdGhlIGZ1bmN0aW9ucyk6IHJlcGxpY2F0ZSByb3dzIGJ5IGNvdW50IChgdW5jb3VudGApLCBjb21iaW5pbmcgZWxlbWVudHMgZnJvbSBtYW55IGNvbHVtbnMgaW50byBhIHNpbmdsZSBjb2x1bW4gKGB1bml0ZWApLCBldGMuIE1hbnkgb25saW5lIGRvY3VtZW50YXRpb24gZXhpc3RzIG9ubGluZSBvbiB0aGUgdXNlIG9mIHRoaXMgcGFja2FnZSBlc3BlY2lhbGx5IGNvbnZlbmllbnQgd2hlbiB5b3UgaGF2ZSB0byByZXBlYXQgYSBmb3JtYXR0aW5nIHRhc2sgb24gYSBsYXJnZSBkYXRhIHNldC4NCg0KDQojIyBEYXRhIG9iamVjdCB0eXBlIGFuZCBzdHJ1Y3R1cmUNCg0KIyMjIENvcmUgZGF0YSB0eXBlcw0KDQpUaGVzZSBkYXRhIHR5cGVzLCBvciBtb2RlcywgZGVmaW5lIGhvdyB0aGUgdmFsdWVzIGFyZSBzdG9yZWQgaW4gdGhlIGNvbXB1dGVyLiBZb3UgY2FuIGdldCBhbiBvYmplY3TigJlzIG1vZGUgdXNpbmcgdGhlIGB0eXBlb2ZgIGZ1bmN0aW9uLiBOb3RlIHRoYXQgUiBhbHNvIGhhcyBhIGJ1aWx0LWluIGBtb2RlYCBmdW5jdGlvbiB0aGF0IHdpbGwgc2VydmUgdGhlIHNhbWUgcHVycG9zZSB3aXRoIHRoZSBvbmUgZXhjZXB0aW9uIGluIHRoYXQgaXQgd2lsbCBub3QgZGlzdGluZ3Vpc2ggaW50ZWdlcnMgZnJvbSBkb3VibGVzLg0KDQojIyMjIE51bWVyaWMNCg0KVGhlIG51bWVyaWMgZGF0YSB0eXBlIGlzIHByb2JhYmx5IHRoZSBzaW1wbGVzdC4gSXQgY29uc2lzdHMgb2YgbnVtYmVycyBzdWNoIGFzIGludGVnZXJzIChlLmcuIDEgLC0zICwzMyAsMCkgb3IgZG91YmxlcyAoZS5nLiAwLjMsIDEyLjQsIC0wLjA0LCAxLjApLiBGb3IgZXhhbXBsZSwgdG8gY3JlYXRlIGEgbnVtZXJpYyAoZG91YmxlKSB2ZWN0b3Igd2UgY2FuIHR5cGU6DQoNCmBgYHtyLCAgZXZhbD1UfQ0KeCA8LSBjKDEuMCwgLTMuNCwgMiwgMTQwLjEpDQptb2RlKHgpDQpgYGANCg0KVG8gYXNzZXNzIGlmIHRoZSBudW1iZXIgaXMgc3RvcmVkIGFzIGFuIGludGVnZXIgb3IgYSBkb3VibGUgdXNlIHRoZSBgdHlwZW9mYCBmdW5jdGlvbi4NCg0KYGBge3IsICBldmFsPVR9DQp0eXBlb2YoeCkNCmBgYA0KDQpOb3RlIHRoYXQgcmVtb3ZpbmcgdGhlIGZyYWN0aW9uIHBhcnQgb2YgYSBudW1iZXIgd2hlbiBjcmVhdGluZyBhIG51bWVyaWMgb2JqZWN0IGRvZXMgbm90IG5lY2Vzc2FyaWx5IGNyZWF0ZSBhbiBpbnRlZ2VyLiBGb3IgZXhhbXBsZSwgY3JlYXRpbmcgd2hhdCBzZWVtcyB0byBiZSBhbiBpbnRlZ2VyIG9iamVjdCByZXR1cm5zIGRvdWJsZSB3aGVuIHF1ZXJpZWQgYnkgYHR5cGVvZmA6DQoNCmBgYHtyLCAgZXZhbD1UfQ0KeCA8LSA0DQp0eXBlb2YoeCkNCmBgYA0KDQpUbyBmb3JjZSBSIHRvIHJlY29nbml6ZSBhIHZhbHVlIGFzIGFuIGludGVnZXIgYWRkIGFuIHVwcGVyIGNhc2UgYExgIHRvIHRoZSBudW1iZXIuDQoNCmBgYHtyLCAgZXZhbD1UfQ0KeCA8LSA0TA0KdHlwZW9mKHgpDQpgYGANCg0KDQojIyMjIENoYXJhY3Rlcg0KDQpUaGUgY2hhcmFjdGVyIGRhdGEgdHlwZSBjb25zaXN0cyBvZiBsZXR0ZXJzIG9yIHdvcmRzIHN1Y2ggYXMgImEiLCAiZiIsICJwcm9qZWN0IiwgImhvdXNlIHZhbHVlIi4NCg0KYGBge3IsICBldmFsPVR9DQp4IDwtIGMoImEiLCAiZiIsICJwcm9qZWN0IiwgImhvdXNlIHZhbHVlIikNCnR5cGVvZih4KQ0KYGBgDQoNCkNoYXJhY3RlcnMgY2FuIGFsc28gY29uc2lzdCBvZiBudW1iZXJzIHJlcHJlc2VudGVkIGFzIGNoYXJhY3RlcnMuIFRoZSBkaXN0aW5jdGlvbiBiZXR3ZWVuIGEgY2hhcmFjdGVyIHJlcHJlc2VudGF0aW9uIG9mIGEgbnVtYmVyIGFuZCBhIG51bWVyaWMgb25lIGlzIGltcG9ydGFudC4gRm9yIGV4YW1wbGUsIGlmIHdlIGhhdmUgdHdvIG51bWVyaWMgdmVjdG9ycyBgeGAgYW5kIGB5YCBzdWNoIGFzDQoNCg0KYGBge3IsICBldmFsPVR9DQp4IDwtIDMNCnkgPC0gNS4zDQpgYGANCg0KYW5kIHdlIGNob29zZSB0byBzdW0gdGhlIHR3byB2YXJpYWJsZXMsIHdlIGdldDoNCg0KDQpgYGB7ciwgIGV2YWw9VH0NCnggKyB5DQpgYGANCg0KDQpJZiB3ZSByZXBlYXQgdGhlc2Ugc3RlcHMgYnV0IGluc3RlYWQgY2hvb3NlIHRvIHJlcHJlc2VudCB0aGUgbnVtYmVycyAnMycgYW5kICc1LjMnIGFzIGNoYXJhY3RlcnMgd2UgZ2V0IHRoZSBmb2xsb3dpbmcgZXJyb3IgbWVzc2FnZToNCg0KDQoNCmBgYHtyLCAgZXZhbD1UfQ0KeCA8LSAiMyINCnkgPC0gIjUuMyINCiMgRXJyb3IgaW4geCArIHk6IG5vbi1udW1lcmljIGFyZ3VtZW50IHRvIGJpbmFyeSBvcGVyYXRvcg0KYGBgDQoNCk5vdGUgdGhlIHVzZSBvZiBxdW90ZXMgdG8gZm9yY2UgbnVtYmVycyB0byBjaGFyYWN0ZXIgbW9kZS4NCg0KDQojIyMjIExvZ2ljYWwNCg0KTG9naWNhbCB2YWx1ZXMgY2FuIHRha2Ugb24gb25lIG9mIHR3byB2YWx1ZXM6IGBUUlVFYCBvciBgRkFMU0VgLiBUaGVzZSBjYW4gYWxzbyBiZSByZXByZXNlbnRlZCBhcyBgMWAgb3IgYDBgLiBGb3IgZXhhbXBsZSwgdG8gY3JlYXRlIGEgbG9naWNhbCB2ZWN0b3Igb2YgNCBlbGVtZW50cywgeW91IGNhbiB0eXBlDQoNCmBgYHtyLCAgZXZhbD1UfQ0KeCA8LSBjKFRSVUUsIEZBTFNFLCBGQUxTRSwgVFJVRSkNCmBgYA0KDQpvcg0KDQpgYGB7ciwgIGV2YWw9VH0NCnggPC0gYXMubG9naWNhbChjKDEsMCwwLDEpKQ0KYGBgDQoNCk5vdGUgdGhhdCBpbiBib3RoIGNhc2VzLCBgdHlwZW9mYCByZXR1cm5zIGxvZ2ljYWwuIEFsc28gbm90ZSB0aGF0IHRoZSBgMWDigJlzIGFuZCBgMGDigJlzIGluIHRoZSBsYXN0IGV4YW1wbGUgYXJlIGNvbnZlcnRlZCB0byBgVFJVRWDigJlzIGFuZCBgRkFMU0Vg4oCZcyBpbnRlcm5hbGx5Lg0KDQojIyMgRGVyaXZlZCBkYXRhIHR5cGVzDQoNClRoZXNlIGRhdGEgdHlwZXMgYXJlIHN0b3JlZCBhcyBlaXRoZXIgbnVtZXJpYywgY2hhcmFjdGVyIG9yIGxvZ2ljYWwgYnV0IGhhdmUgYWRkaXRpb25hbCAqYXR0cmlidXRlKiBpbmZvcm1hdGlvbiB0aGF0IGFsbG93IHRoZXNlIG9iamVjdHMgdG8gYmUgdHJlYXRlZCBpbiBzcGVjaWFsIHdheXMgYnkgY2VydGFpbiBmdW5jdGlvbnMgaW4gUi4gVGhlc2UgYXR0cmlidXRlcyBkZWZpbmUgYW4gb2JqZWN04oCZcyAqKmNsYXNzKiogYW5kIGNhbiBiZSBleHRyYWN0ZWQgZnJvbSB0aGF0IG9iamVjdCB2aWEgdGhlICdjbGFzcycgZnVuY3Rpb24uDQoNCg0KIyMjIyBGYWN0b3INCg0KKipGYWN0b3JzKiogYXJlIG5vcm1hbGx5IHVzZWQgdG8gZ3JvdXAgdmFyaWFibGVzIGludG8gYSBmaXhlZCBudW1iZXIgb2YgdW5pcXVlIGNhdGVnb3JpZXMgb3IgKipsZXZlbHMqKi4gRm9yIGV4YW1wbGUsIGEgZGF0YXNldCBtYXkgYmUgZ3JvdXBlZCBieSBnZW5kZXIgb3IgbW9udGggb2YgdGhlIHllYXIuIFN1Y2ggZGF0YSBhcmUgdXN1YWxseSBsb2FkZWQgaW50byBSIGFzIGEgbnVtZXJpYyBvciBjaGFyYWN0ZXIgZGF0YSB0eXBlIHJlcXVpcmluZyB0aGF0IHRoZXkgYmUgY29udmVydGVkIHRvIGEgZmFjdG9yIHVzaW5nIHRoZSBgYXMuZmFjdG9yYCBmdW5jdGlvbi4NCg0KYGBge3IsICBldmFsPVR9DQphIDwtIGMoIk0iLCAiRiIsICJGIiwgIlUiLCAiRiIsICJNIiwgIk0iLCAiTSIsICJGIiwgIlUiKQ0KYS5mYWN0IDwtIGFzLmZhY3RvcihhKQ0KYGBgDQoNCk5vdGUgdGhhdCBgYWAgaXMgb2YgYGNoYXJhY3RlcmAgZGF0YSB0eXBlLg0KDQoNCmBgYHtyLCAgZXZhbD1UfQ0KdHlwZW9mKGEpDQpgYGANCg0KSG93ZXZlciwgdGhlIGRlcml2ZWQgb2JqZWN0IGBhLmZhY3RgIGlzIG5vdyBzdG9yZWQgYXMgYW4gYGludGVnZXJgIQ0KDQpgYGB7ciwgIGV2YWw9VH0NCnR5cGVvZihhLmZhY3QpDQpgYGANCg0KWWV0LCB3aGVuIGRpc3BsYXlpbmcgdGhlIGNvbnRlbnRzIG9mIGBhLmZhY3RgIHdlIHNlZSBjaGFyYWN0ZXIgdmFsdWVzLg0KDQpgYGB7ciwgIGV2YWw9VH0NCmEuZmFjdA0KYGBgDQoNCkhvdyBjYW4gdGhpcyBiZT8gV2VsbCwgYGEuZmFjdGAgaXMgYSBtb3JlIGNvbXBsaWNhdGVkIG9iamVjdCB0aGFuIHRoZSBzaW1wbGUgb2JqZWN0cyBjcmVhdGVkIHRodXMgZmFyIGluIHRoYXQgdGhlIGZhY3RvciBpcyBzdG9yaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gbm90IHNlZW4gaW4gaXRzIG91dHB1dC4gVGhpcyBoaWRkZW4gaW5mb3JtYXRpb24gaXMgc3RvcmVkIGluICoqYXR0cmlidXRlcyoqLiBUbyB2aWV3IHRoZXNlIGhpZGRlbiBhdHRyaWJ1dGVzLCB1c2UgdGhlIGBhdHRyaWJ1dGVzYCBmdW5jdGlvbi4NCg0KYGBge3IsICBldmFsPVR9DQphdHRyaWJ1dGVzKGEuZmFjdCkNCmBgYA0KDQpUaGVyZSBhcmUgdHdvIGF0dHJpYnV0ZXM6IGBsZXZlbHNgIGFuZCBgY2xhc3NgLiBUaGUgbGV2ZWxzIGF0dHJpYnV0ZSBsaXN0cyB0aGUgdGhyZWUgdW5pcXVlIHZhbHVlcyBpbiBgYS5mYWN0YC4gVGhlIG9yZGVyIGluIHdoaWNoIHRoZXNlIGxldmVscyBhcmUgbGlzdGVkIHJlZmxlY3QgdGhlaXIgKm51bWVyaWMqIHJlcHJlc2VudGF0aW9uLiBTbyBpbiBlc3NlbmNlLCBgYS5mYWN0YCBpcyBzdG9yaW5nIGVhY2ggdmFsdWUgYXMgYW4gaW50ZWdlciB0aGF0IHBvaW50cyB0byBvbmUgb2YgdGhlIHRocmVlIHVuaXF1ZSBsZXZlbHMuIFRoZSB1bmlxdWUgbGV2ZWxzIG9mIGEgZmFjdG9yLCBhbmQgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgYXJlIHN0b3JlZCBjYW4gYmUgZXh0cmFjdGVkIHVzaW5nIHRoZSBgbGV2ZWxzYCBmdW5jdGlvbi4NCg0KYGBge3IsICBldmFsPVR9DQpsZXZlbHMoYS5mYWN0KQ0KYGBgDQoNClJlbWVtYmVyLCB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGxldmVscyBhcmUgZGlzcGxheWVkIG1hdGNoIHRoZWlyIGludGVnZXIgcmVwcmVzZW50YXRpb24uIElmIHdlIHdhbnRlZCB0aGVtICBpbiBhIGRpZmZlcmVudCBvcmRlciAoaS5lLiBVIGZpcnN0IGZvbGxvd2VkIGJ5IEYgdGhlbiBNKSB3ZSB3b3VsZCBuZWVkIHRvIG1vZGlmeSB0aGVtIGJ5IHJlY3JlYXRpbmcgdGhlIGZhY3RvciBvYmplY3QgYXMgZm9sbG93czoNCg0KYGBge3IsICBldmFsPVR9DQpmYWN0b3IoYSwgbGV2ZWxzPWMoIlUiLCJGIiwiTSIpKQ0KYGBgDQoNClRoaXMgY2FuIGJlIGltcG9ydGFudCB3aGVuIHlvdSB3aWxsIHRyeSB0byByZWFycmFuZ2UgYSBwbG90Lg0KDQo+ICo8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4qKlJQNCoqOiBVbmRlcnN0YW5kaW5nIHRoZSBmYWN0b3JzIGFuZCB0aGVpciBsZXZlbHMgaXMgY3JpdGljYWwsIGVzcGVjaWFsbHkgd2hlbiB5b3Ugd2lsbCBzdWJzZXQuIExldCdzIGV4cGxvcmUgdG9nZXRoZXIgd2h5IHVzaW5nIG91ciBgaXJpc2AgZGF0YXNldA0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9RkFMU0V9DQppcmlzLnNlbDwtIHN1YnNldChpcmlzLCBTcGVjaWVzID09ICJzZXRvc2EiIHwgU3BlY2llcyA9PSAidmlyZ2luaWNhIikgIyBsZXQncyBzdWJzZXQgdHdvIHNwZWNpZXMNCmxldmVscyhpcmlzLnNlbCRTcGVjaWVzKSAjIHRoZSAzIHNwZWNpZXMgYXJlIHN0aWxsIHRoZXJlDQpib3hwbG90KFBldGFsLldpZHRoIH4gU3BlY2llcywgaXJpcy5zZWwsIGhvcml6b250YWwgPSBUUlVFKSAjIFRoaXMgY2FuIGJlIGEgbnVpc2FuY2Ugd2hlbiBwbG90dGluZyB0aGUgZGF0YSBzdWJzZXQNCg0KaXJpcy5zZWwkU3BlY2llcyA8LSBkcm9wbGV2ZWxzKGlyaXMuc2VsJFNwZWNpZXMpDQpsZXZlbHMoaXJpcy5zZWwkU3BlY2llcykNCmJveHBsb3QoUGV0YWwuV2lkdGggfiBTcGVjaWVzLCBpcmlzLnNlbCwgaG9yaXpvbnRhbCA9IFRSVUUpDQpgYGANCg0KKipBTFdBWVMqKiBDSEVDSyBUSEUgREFUQSBUWVBFIEFORCBTVFJVQ1RSRSBPRiBZT1VSIERBVEEgU0VUIQ0KDQojIyMjIERhdGUNCg0KRGF0ZSB2YWx1ZXMgYXJlIHN0b3JlZCBhcyBudW1iZXJzLiBCdXQgdG8gYmUgcHJvcGVybHkgaW50ZXJwcmV0ZWQgYXMgYSBkYXRlIG9iamVjdCBpbiBSLCB0aGVpciBhdHRyaWJ1dGUgbXVzdCBiZSBleHBsaWNpdGx5IGRlZmluZWQgYXMgYSAqKmRhdGUqKi4gUiBwcm92aWRlcyBtYW55IGZhY2lsaXRpZXMgdG8gY29udmVydCBhbmQgbWFuaXB1bGF0ZSBkYXRlcyBhbmQgdGltZXMsIGJ1dCBhIHBhY2thZ2UgY2FsbGVkIGBsdWJyaWRhdGVgIG1ha2VzIHdvcmtpbmcgd2l0aCBkYXRlcy90aW1lcyBtdWNoIGVhc2llci4gV29ya2luZyB3aXQgZGF0YSBjb3VsZCBiZSB0aGUgb2JqZWN0IG9mIGEgc3BlY2lmaWMgdG9waWMsIGFuZCBpdCB3aWxsIG5vIGJlIGNvdmVyZWQgaGVyZS4NCg0KIyMjIyBOQSBhbmQgTlVMTA0KDQpZb3Ugd2lsbCBmaW5kIHRoYXQgbWFueSBkYXRhIGZpbGVzIGNvbnRhaW4gbWlzc2luZyBvciB1bmtub3duIHZhbHVlcy4gSXQgbWF5IGJlIHRlbXB0aW5nIHRvIGFzc2lnbiB0aGVzZSBtaXNzaW5nIG9yIHVua25vd24gdmFsdWVzIGEgYDBgIGJ1dCBkb2luZyBzbyBjYW4gbGVhZCB0byBtYW55IHVuZGVzaXJhYmxlIHJlc3VsdHMgd2hlbiBhbmFseXppbmcgdGhlIGRhdGEuIFIgaGFzIHR3byBwbGFjZWhvbGRlcnMgZm9yIHN1Y2ggZWxlbWVudHM6IGBOQWAgYW5kIGBOVUxMYA0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KeCA8LSBjKDIzLCBOQSwgMS4yLCA1KQ0KYGBgDQoNCmBOQWAgKE5vdCBBdmFpbGFibGUpIGlzIGEgbWlzc2luZyB2YWx1ZSBpbmRpY2F0b3IuIEl0IHN1Z2dlc3RzIHRoYXQgYSB2YWx1ZSBzaG91bGQgYmUgcHJlc2VudCBidXQgaXMgdW5rbm93bi4NCg0KVGhlIGBOVUxMYCBvYmplY3QgYWxzbyByZXByZXNlbnRzIG1pc3NpbmcgdmFsdWVzIGJ1dCBpdHMgaW50ZXJwcmV0YXRpb24gaXMgc2xpZ2h0bHkgZGlmZmVyZW50IGluIHRoYXQgaXQgc3VnZ2VzdHMgdGhhdCB0aGUgdmFsdWUgZG9lcyBub3QgZXhpc3Qgb3IgdGhhdCBpdOKAmXMgbm90IG1lYXN1cmFibGUuDQoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp5IDwtIGMoMjMsIE5VTEwsIDEuMiwgNSkNCmBgYA0KDQpSZW1lbWJlciB3aGVuIHdlIHByZXZpb3VzbHkgcmVtb3ZlZCB0aGUgdmFyaWFibGVzIHRoYXQgd2UgZGlkIG5vdCB3YW50IHRvIGV4aXN0IGluIG91ciBgc3R1ZGVudHNgIGRhdGFzZXQuVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBgTkFgIGFuZCBgTlVMTGAgbWF5IHNlZW0gc3VidGxlLCBidXQgdGhlaXIgaW50ZXJwcmV0YXRpb24gaW4gc29tZSBmdW5jdGlvbnMgY2FuIGxlYWQgdG8gZGlmZmVyZW50IG91dGNvbWVzLiBGb3IgZXhhbXBsZSwgd2hlbiBjb21wdXRpbmcgdGhlIG1lYW4gb2YgYHhgLCBSIHJldHVybnMgYW4gYE5BYCB2YWx1ZToNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQptZWFuKHgpDQpgYGANCg0KVGhpcyBzZXJ2ZXMgYXMgYSBjaGVjayB0byByZW1pbmQgdGhlIHVzZXIgdGhhdCBvbmUgb2YgdGhlIGVsZW1lbnRzIGlzIG1pc3NpbmcuIFRoaXMgY2FuIGJlIG92ZXJjb21lIGJ5IHNldHRpbmcgdGhlIGBuYS5ybWAgcGFyYW1ldGVyIHRvIGBUUlVFYCBhcyBpbiBgbWVhbih4LCBuYS5ybT1UKWAgaW4gd2hpY2ggY2FzZSBSIGlnbm9yZXMgdGhlIG1pc3NpbmcgdmFsdWUuDQoNCkEgYE5VTExgIG9iamVjdCwgb24gdGhlIG90aGVyIGhhbmQsIGlzIHRyZWF0ZWQgZGlmZmVyZW50bHkuIFNpbmNlIGBOVUxMYCBpbXBsaWVzIHRoYXQgYSB2YWx1ZSBzaG91bGQgbm90IGJlIHByZXNlbnQsIFIgbm8gbG9uZ2VyIGZlZWxzIHRoZSBuZWVkIHRvIHRyZWF0IHN1Y2ggZWxlbWVudCBhcyBxdWVzdGlvbmFibGUgYW5kIGFsbG93cyB0aGUgbWVhbiB2YWx1ZSB0byBiZSBjb21wdXRlZDoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQptZWFuKHkpDQpgYGANCg0KSXTigJlzIG1vcmUgY29tbW9uIHRvIGZpbmQgZGF0YSB0YWJsZXMgd2l0aCBtaXNzaW5nIGVsZW1lbnRzIHBvcHVsYXRlZCB3aXRoIGBOQWDigJlzIHRoYW4gYE5VTExg4oCZcyBzbyB1bmxlc3MgeW91IGhhdmUgYSBzcGVjaWZpYyByZWFzb24gdG8gdXNlIGBOVUxMYCBhcyBhIG1pc3NpbmcgdmFsdWUgcGxhY2Vob2xkZXIsIHVzZSBgTkFgIGluc3RlYWQuDQoNCg0KDQojIyMgRGF0YSBzdHJ1Y3R1cmVzDQoNCk1vc3QgZGF0YXNldHMgd2Ugd29yayB3aXRoIGNvbnNpc3Qgb2YgYmF0Y2hlcyBvZiB2YWx1ZXMgc3VjaCBhcyBhIHRhYmxlIG9mIHRlbXBlcmF0dXJlIHZhbHVlcyBvciBhIGxpc3Qgb2Ygc3VydmV5IHJlc3VsdHMuIFRoZXNlIGJhdGNoZXMgYXJlIHN0b3JlZCBpbiBSIGluIG9uZSBvZiBzZXZlcmFsIGRhdGEgc3RydWN0dXJlcy4gVGhlc2UgaW5jbHVkZSAqKihhdG9taWMpIHZlY3RvcnMqKiwgKiptYXRyaWNlcyoqLCAqKmRhdGEgZnJhbWVzKiogYW5kICoqbGlzdHMqKi4NCg0KIVtdKEZpZ3VyZXMvZGF0YV9zdHJ1Y3R1cmVzLnBuZykNCg0KDQojIyMjIChBdG9taWMpIHZlY3RvcnMNCg0KVGhlICoqYXRvbWljIHZlY3RvcioqIChvciAqKnZlY3RvcioqIGZvciBzaG9ydCkgaXMgdGhlIHNpbXBsZXN0IGRhdGEgc3RydWN0dXJlIGluIFIgd2hpY2ggY29uc2lzdHMgb2YgYW4gb3JkZXJlZCBzZXQgb2YgdmFsdWVzIG9mIHRoZSBzYW1lIHR5cGUgYW5kIG9yIGNsYXNzIChlLmcuIG51bWVyaWMsIGNoYXJhY3RlciwgZGF0ZSwgZXRj4oCmKS4gQSB2ZWN0b3IgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGNvbWJpbmUgZnVuY3Rpb24gYygpIGFzIGluDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KeCA8LSBjKDY3NCAsIDQxODYgLCA1MzA4ICwgNTA4MyAsIDYxNDAgLCA2MzgxKQ0KeA0KYGBgDQoNCkFzIHdlIHNlZW4gYmVmb3JlLCBhIHZlY3RvciBvYmplY3QgaXMgYW4gaW5kZXhhYmxlIGNvbGxlY3Rpb24gb2YgdmFsdWVzIHdoaWNoIGFsbG93cyBvbmUgdG8gYWNjZXNzIGEgc3BlY2lmaWMgaW5kZXggbnVtYmVyLiBGb3IgZXhhbXBsZSwgdG8gYWNjZXNzIHRoZSB0aGlyZCBlbGVtZW50IG9mIHgsIHR5cGU6DQoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp4WzNdDQpgYGANCg0KWW91IGNhbiBhbHNvIHNlbGVjdCBhIHN1YnNldCBvZiBlbGVtZW50cyBieSBpbmRleCB2YWx1ZXMgdXNpbmcgdGhlIGNvbWJpbmUgZnVuY3Rpb24gYygpLg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCnhbYygxLDMsNCldDQpgYGANCg0KT3IsIGlmIHlvdSBhcmUgaW50ZXJlc3RlZCBpbiBhIHJhbmdlIG9mIGluZGV4ZWQgdmFsdWVzIHN1Y2ggYXMgaW5kZXggMiB0aHJvdWdoIDQsIHVzZSB0aGUgOiBvcGVyYXRvci4NCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp4WzI6NF0NCmBgYA0KDQpZb3UgY2FuIGFsc28gYXNzaWduIG5ldyB2YWx1ZXMgdG8gYSBzcGVjaWZpYyBpbmRleC4gRm9yIGV4YW1wbGUsIHdlIGNhbiByZXBsYWNlIHRoZSBzZWNvbmQgdmFsdWUgaW4gdmVjdG9yIGB4YCB3aXRoIGAwYC4NCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp4WzJdIDwtIDANCngNCmBgYA0KDQpOb3RlIHRoYXQgYSB2ZWN0b3IgY2FuIHN0b3JlIGFueSBkYXRhIHR5cGUgc3VjaCBhcyBjaGFyYWN0ZXJzLg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCnggPC0gYygiYWxsIiwgImIiLCAib2xpdmUiKQ0KeA0KYGBgDQoNCkhvd2V2ZXIsIGEgdmVjdG9yIGNhbiBvbmx5IGJlIG9mIG9uZSB0eXBlLiBGb3IgZXhhbXBsZSwgeW91IGNhbm5vdCBtaXggbnVtZXJpYyBhbmQgY2hhcmFjdGVyIHR5cGVzIGFzIGZvbGxvd3M6DQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KeCA8LSBjKCAxLjIsIDUsICJSdCIsICIyMDAwIikNCmBgYA0KDQpJbiBzdWNoIGEgc2l0dWF0aW9uLCBSIHdpbGwgY29udmVydCB0aGUgZWxlbWVudCB0eXBlcyB0byB0aGUgKipoaWdoZXN0IGNvbW1vbiBtb2RlKiogZm9sbG93aW5nIHRoZSBvcmRlciAqKk5VTEwqKiA8ICoqbG9naWNhbCoqIDwgKippbnRlZ2VyKiogPCAqKmRvdWJsZSoqIDwgKipjaGFyYWN0ZXIqKi4gSW4gb3VyIHdvcmtpbmcgZXhhbXBsZSwgdGhlIGVsZW1lbnRzIGFyZSBjb2VyY2VkIHRvIGNoYXJhY3RlcjoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp0eXBlb2YoeCkNCmBgYA0KDQoNCiMjIyMgTWF0cmljZXMgYW5kIGFycmF5cw0KDQoNCk1hdHJpY2VzIGluIFIgY2FuIGJlIHRob3VnaHQgb2YgYXMgdmVjdG9ycyBpbmRleGVkIHVzaW5nIHR3byBpbmRpY2VzIGluc3RlYWQgb2Ygb25lLiBGb3IgZXhhbXBsZSwgdGhlIGZvbGxvd2luZyBsaW5lIG9mIGNvZGUgY3JlYXRlcyBhIDMgYnkgMyBtYXRyaXggb2YgcmFuZG9tbHkgZ2VuZXJhdGVkIHZhbHVlcy4gVGhlIHBhcmFtZXRlcnMgJ25yb3cnIGFuZCAnbmNvbCcgZGVmaW5lIHRoZSBtYXRyaXggZGltZW5zaW9uIGFuZCB0aGUgZnVuY3Rpb24gJ3J1bmlmJyBnZW5lcmF0ZXMgdGhlIG5pbmUgcmFuZG9tIG51bWJlcnMgdGhhdCBwb3B1bGF0ZSB0aGlzIG1hdHJpeC4NCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQptIDwtIG1hdHJpeChydW5pZig5LDAsMTApLCBucm93ID0gMywgbmNvbCA9IDMpDQptDQpgYGANCg0KDQpJZiBhIGhpZ2hlciBkaW1lbnNpb24gdmVjdG9yIGlzIGRlc2lyZWQsIHRoZW4gdXNlIHRoZSBgYXJyYXlgIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBuLWRpbWVuc2lvbmFsIG9iamVjdC4gQSAzeDN4MyBhcnJheSBjYW4gYmUgY3JlYXRlZCBhcyBmb2xsb3dzOg0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KbSA8LSBhcnJheShydW5pZigyNywwLDEwKSwgYygzLDMsMykpDQptDQpgYGANCg0KTWF0cmljZXMgYW5kIGFycmF5cyBjYW4gc3RvcmUgbnVtZXJpYyBvciBjaGFyYWN0ZXIgZGF0YSB0eXBlcywgYnV0IHRoZXkgY2Fubm90IHN0b3JlIGJvdGguIA0KDQojIyMjIERhdGEgZnJhbWVzDQoNCkEgKipkYXRhIGZyYW1lKiogaXMgd2hhdCBjb21lcyBjbG9zZXN0IHRvIG91ciBwZXJjZXB0aW9uIG9mIGEgZGF0YSB0YWJsZS4gSXTigJlzIGFuIGV4dGVuc2lvbiBvZiB0aGUgbWF0cml4IG9iamVjdCBpbiB0aGF0LCB1bmxpa2UgYSBtYXRyaXgsIGEgZGF0YSBmcmFtZSBjYW4gKm1peCogZGF0YSB0eXBlcyBhY3Jvc3MgY29sdW1ucyAoZS5nLiBib3RoIG51bWVyaWMgYW5kIGNoYXJhY3RlciBjb2x1bW5zIGNhbiBjb2V4aXN0IGluIGEgZGF0YSBmcmFtZSkgYnV0IGRhdGEgdHlwZSByZW1haW5zIHRoZSBzYW1lIGFjcm9zcyByb3dzLg0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KbmFtZSAgIDwtIGMoImExIiwgImEyIiwgImIzIikNCnZhbHVlMSA8LSBjKDIzLCA0LCAxMikNCnZhbHVlMiA8LSBjKDEsIDQ1LCA1KQ0KZGF0ICAgIDwtIGRhdGEuZnJhbWUobmFtZSwgdmFsdWUxLCB2YWx1ZTIpDQpkYXQNCnN0cihkYXQpICMgcHJvdmlkZSBzdHJ1Y3R1cmUNCmF0dHJpYnV0ZXMoZGF0KSAjIHByb3ZpZGUgYXR0cmlidXRlcw0KbmFtZXMoZGF0KSAjIGV4dHJhY3QgY29sdW0gbmFtZXMNCnJvd25hbWVzKGRhdCkgIyBleHRyYWN0IHJvdyBuYW1lcw0KYGBgDQoNCiMjIyMgTGlzdHMNCg0KQSAqKmxpc3QqKiBpcyBhbiBvcmRlcmVkIHNldCBvZiBjb21wb25lbnRzIHN0b3JlZCBpbiBhIDFEIHZlY3Rvci4gSW4gZmFjdCwgaXTigJlzIGFub3RoZXIga2luZCBvZiB2ZWN0b3IgY2FsbGVkIGEgcmVjdXJzaXZlIHZlY3RvciB3aGVyZSBlYWNoIHZlY3RvciBlbGVtZW50IGNhbiBiZSBvZiBkaWZmZXJlbnQgZGF0YSB0eXBlIGFuZCBzdHJ1Y3R1cmUuIFRoaXMgaW1wbGllcyB0aGF0IGVhY2ggZWxlbWVudCBvZiBhIGxpc3QgY2FuIGhvbGQgY29tcGxleCBvYmplY3RzIHN1Y2ggYXMgbWF0cmljZXMsIGRhdGEgZnJhbWVzIGFuZCBvdGhlciBsaXN0IG9iamVjdHMgdG9vISBUaGluayBvZiBhIGxpc3QgYXMgYSBzaW5nbGUgY29sdW1uIHNwcmVhZHNoZWV0IHdoZXJlIGVhY2ggY2VsbCBzdG9yZXMgYW55dGhpbmcgZnJvbSBhIG51bWJlciwgdG8gYSB0aHJlZSBwYXJhZ3JhcGggc2VudGVuY2UsIHRvIGEgZml2ZSBjb2x1bW4gdGFibGUuDQoNCkEgbGlzdCBpcyBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgYGxpc3RgIGZ1bmN0aW9uLiBGb3IgZXhhbXBsZSwgdGhlIGZvbGxvd2luZyBsaXN0IGNvbnNpc3RzIG9mIDMgY29tcG9uZW50czogYSB0d28tY29sdW1uIGRhdGEgZnJhbWUgKHRhZ2dlZCBhcyBjb21wb25lbnQgYEFgKSwgYSB0d28gZWxlbWVudCBsb2dpY2FsIHZlY3RvciAodGFnZ2VkIGFzIGNvbXBvbmVudCBgQmApIGFuZCBhIHRocmVlIGVsZW1lbnQgY2hhcmFjdGVyIHZlY3RvciAodGFnZ2VkIGFzIGNvbXBvbmVudCBgQ2ApLg0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0KQSA8LSBkYXRhLmZyYW1lKA0KICAgICB4ID0gYyg3LjMsIDI5LjQsIDI5LjQsIDIuOSwgMTIuMywgNy41LCAzNi4wLCA0LjgsIDE4LjgsIDQuMiksDQogICAgIHkgPSBjKDUuMiwgMjYuNiwgMzEuMiwgMi4yLCAxMy44LCA3LjgsIDM1LjIsIDguNiwgMjAuMywgMS4xKSApDQpCIDwtIGMoVFJVRSwgRkFMU0UpDQpDIDwtIGMoImFwcGxlcyIsICJvcmFuZ2VzIiwgInJvdW5kIikNCmxzdCA8LSBsaXN0KEEgPSBBLCBCID0gQiwgQyA9IEMpDQpgYGANCg0KWW91IGNhbiB2aWV3IGVhY2ggY29tcG9uZW504oCZcyBzdHJ1Y3R1cmUgdXNpbmcgdGhlIGBzdHJgIGZ1bmN0aW9uLg0KDQoNCmBgYHtyIGNsYXNzLnNvdXJjZSA9ICJmb2xkLXNob3ciLCAgZXZhbD1UfQ0Kc3RyKGxzdCkNCm5hbWVzKGxzdCkNCmBgYA0KDQpFYWNoIGNvbXBvbmVudCBvZiBhIGxpc3QgY2FuIGJlIGV4dHJhY3RlZCB1c2luZyB0aGUgYCRgIHN5bWJvbCBmb2xsb3dlZCBieSB0aGF0IGNvbXBvbmVudOKAmXMgbmFtZS4gRm9yIGV4YW1wbGUsIHRvIGFjY2VzcyBjb21wb25lbnQgQSBmcm9tIGxpc3QgYGxzdGAsIHR5cGU6DQoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQpsc3QkQQ0KYGBgDQoNCllvdSBjYW4gYWxzbyBhY2Nlc3MgdGhhdCBzYW1lIGNvbXBvbmVudCB1c2luZyBpdHMgbnVtZXJpY2FsIGluZGV4LiBTaW5jZSBBIGlzIHRoZSBmaXJzdCBjb21wb25lbnQgaW4gYGxzdGAsIGl0cyBudW1lcmljYWwgaW5kZXggaXMgYDFgLg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCmxzdFtbMV1dDQpjbGFzcyhsc3RbWzFdXSkNCmBgYA0KDQpOb3RlIHRoYXQgY29tcG9uZW50cyBkbyBub3QgcmVxdWlyZSBuYW1lcy4gRm9yIGV4YW1wbGUsIHdlIGNvdWxkIGhhdmUgY3JlYXRlZCBhIGxpc3QgYXMgZm9sbG93cyAobm90ZSB0aGUgb21pc3Npb24gb2YgYEE9YCwgYEI9YCwgZXRj4oCmKToNCg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCmxzdC5ub3RhZ3MgPC0gbGlzdChBLCBCLCBEKQ0KbHN0Lm5vdGFncw0KYGBgDQoNCldoZW4gbGlzdHMgZG8gbm90IGhhdmUgY29tcG9uZW50IG5hbWVzLCB0aGUgYG5hbWVzYCBmdW5jdGlvbiB3aWxsIHJldHVybiBOVUxMLg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCm5hbWVzKGxzdC5ub3RhZ3MpDQpgYGANCg0KDQpZb3XigJlsbCBmaW5kIHRoYXQgbWFueSBmdW5jdGlvbnMgaW4gUiByZXR1cm4gbGlzdCBvYmplY3RzIHN1Y2ggYXMgdGhlIGxpbmVhciByZWdyZXNzaW9uIG1vZGVsIGZ1bmN0aW9uIGBsbWAuIEZvciBleGFtcGxlLCB3aGVuIHdlIHJ1biBhIHJlZ3Jlc3Npb24gYW5hbHlzaXMgZm9yIHZlY3RvciBlbGVtZW50cyBgeGAgYW5kIGB5YCAoaW4gZGF0YSBmcmFtZSBgQWApIGFuZCBzYXZlIHRoZSBvdXRwdXQgb2YgdGhlIHJlZ3Jlc3Npb24gYW5hbHlzaXMgdG8gYW4gb2JqZWN0IGNhbGxlZCBNOg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCk0gPC0gbG0oIHkgfiB4LCBBKQ0Kc3RyKE0pDQpuYW1lcyhNKQ0KYGBgDQoNClRoZSBgTWAgbGlzdCBpcyBtb3JlIGNvbXBsZXggdGhhbiB0aGUgc2ltcGxlIGxpc3QgYGxzdGAgd2UgY3JlYXRlZCBlYXJsaWVyLiBJbiBhZGRpdGlvbiB0byBoYXZpbmcgbW9yZSBjb21wb25lbnRzLCBpdCBzdG9yZXMgYSAqd2lkZXIqIHJhbmdlIG9mIGRhdGEgdHlwZXMgYW5kIHN0cnVjdHVyZXMuIEZvciBleGFtcGxlLCBlbGVtZW50IHFyIGlzIGl0c2VsZiBhIGxpc3Qgb2YgZml2ZSBlbGVtZW50cyENCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQpzdHIoTSRxcikNCmBgYA0KDQpTbyBpZiB3ZSB3YW50IHRvIGFjY2VzcyB0aGUgZWxlbWVudCByYW5rIGluIHRoZSBjb21wb25lbnQgcXIgb2YgbGlzdCBgTWAsIHdlIGNhbiB0eXBlOg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCk0kcXIkcmFuaw0KYGBgDQoNCiMjIyBDb2VyY2luZyBkYXRhDQoNCkRhdGEgY2FuIGJlIGNvZXJjZWQgZnJvbSBvbmUgdHlwZSB0byBhbm90aGVyLiBGb3IgZXhhbXBsZSwgdG8gY29lcmNlIHRoZSBmb2xsb3dpbmcgdmVjdG9yIG9iamVjdCBmcm9tIGNoYXJhY3RlciB0byBudW1lcmljLCB1c2UgdGhlIGBhcy5udW1lcmljYCBmdW5jdGlvbi4NCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQp5ICAgPC0gYygiMjMuOCIsICI2IiwgIjEwMC4wMSIsIjYiKQ0KeS5jIDwtIGFzLm51bWVyaWMoeSkNCnkuYw0KYGBgDQoNClRoZSBgYXMubnVtZXJpY2AgZnVuY3Rpb24gZm9yY2VzIHRoZSB2ZWN0b3IgdG8gYSBkb3VibGUgKHlvdSBjb3VsZCBoYXZlIGFsc28gdXNlZCB0aGUgYGFzLmRvdWJsZWAgZnVuY3Rpb24pLiBJZiB5b3UgY29udmVydCBgeWAgdG8gYW4gaW50ZWdlciwgUiB3aWxsIHJlbW92ZSBhbGwgZnJhY3Rpb25hbCBwYXJ0cyBvZiB0aGUgbnVtYmVyLg0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCmFzLmludGVnZXIoeSkNCmBgYA0KDQpUbyBjb252ZXJ0IGEgbnVtYmVyIHRvIGEgY2hhcmFjdGVyIHVzZSBgYXMuY2hhcmFjdGVyYA0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCm51bWNoYXIgPC0gYXMuY2hhcmFjdGVyKHkuYykNCm51bWNoYXINCmBgYA0KDQpZb3UgY2FuIGFsc28gY29lcmNlIGEgbnVtYmVyIG9yIGNoYXJhY3RlciB0byBhIGZhY3Rvci4NCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPVR9DQpudW1mYWMgPC0gYXMuZmFjdG9yKHkpDQpudW1mYWMNCmBgYA0KDQpgYGB7ciBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IiwgIGV2YWw9VH0NCmNoYXJmYWMgPC0gYXMuZmFjdG9yKHkuYykNCmNoYXJmYWMNCmBgYA0KDQoNClRoZXJlIGFyZSBtYW55IG90aGVyIGNvZXJjaW9uIGZ1bmN0aW9ucyBpbiBSLCBhIHN1bW1hcnkgb2Ygc29tZSB0aGUgbW9zdCBjb21tb24gb25lcyB3ZeKAmWxsIGJlIHVzaW5nIGluIHRoaXMgY291cnNlIGZvbGxvd3M6DQoNCg0KYGBge3IgY2xhc3Muc291cmNlID0gImZvbGQtc2hvdyIsICBldmFsPUZ9DQphcy5jaGFyYWN0ZXIoKSAjCUNvbnZlcnQgdG8gY2hhcmFjdGVyDQphcy5udW1lcmljKCkgIGFzLmRvdWJsZSgpCSMgQ29udmVydCB0byBkb3VibGUNCmFzLmludGVnZXIoKQkjIENvbnZlcnQgdG8gaW50ZWdlcg0KYXMuZmFjdG9yKCkJIyBDb252ZXJ0IHRvIGZhY3Rvcg0KYXMubG9naWNhbCgpCSNDb252ZXJ0IHRvIGEgQm9vbGVhbg0KYGBgDQoNCi0tLS0tLS0tLQ0KDQo+ICo8c3BhbiBzdHlsZT0iY29sb3I6IGdyZWVuIj4qKlJQNSoqOiBjcmVhdGUgdGhlIGZvbGxvd2luZyBkYXRhIGZyYW1lIHN1bW1hcml6aW5nIHRoZSByZXN1bHRzIG9mIGEgc21hbGwgZXhwZXJpbWVudCBvbiA1IGluZGl2aWR1YWxzIHRlc3RpbmcgdGhlIGVmZmljaWVuY3kgb2YgYSBzcGVjaWZpYyBkaWV0IChkcmlua2luZyBidWJibGUgdGVhIG9ubHkgLSBmZWFrIGRhdGEpLiBDcmVhdGUgYW5vdGhlciB2ZWN0b3Igd2l0aCB0aGUgd2VpZ2h0IGxvc3MgKGluICUpIGFzc29jaWF0ZWQgd2l0aCBzdWJqZWN0IG5vLiBXaGF0IGNhbiB5b3Ugc2F5IG9uIHRoaXMgYnViYmxlIHRlYSBkaWV0PyBSZWZvcm1hdCB0aGUgdGFibGUgYnkgY3JlYXRpbmc6IGEgdmFyaWFibGUgYGluZGl2aWR1YWxgIHdpdGggdGhlIGlkZW50aXR5IG9mIHRoZSBmaXZlIGluZGl2aWR1YWxzLCAgYSB2YXJpYWJsZSBgZGlldGAgd2l0aCB0d28gbGV2ZWxzIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgLCBhIHZhcmlhYmxlIGB3ZWlnaHRgIGNvbnRhaW5pbmcgdGhlIHdlaWdodCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBkaWV0LiA8L3NwYW4+Kg0KDQoNCg0K" download="manipulation.Rmd">Download manipulation.Rmd</a></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><a href="data:text/plain;base64,bGlicmFyeSAoZGF0YXNldHMpICMgbG9hZCB0aGUgZGF0YXNldCBwYWNrYWdlDQpybShsaXN0PWxzKCkpICMgcmVtb3ZlIG9iamVjdHMgYWxyZWFkeSBwcmVzZW50DQpkYXRhKGlyaXMpICMgbG9hZCBpcmlzIGRhdGFzZXQNCmxzKCkgIyB0aGUgZnVuY3Rpb24gZGF0YSBpbXBvcnQgYW4gb2JqZWN0ICdpcmlzJw0KaXJpcyAjIHByaW50IHRoZSBvYmplY3QNCmZpeChpcmlzKSAjIG9wZW4gYSBzcGVhZHNoZWV0IG9uIHRoZSBvYmplY3QNCnN1bW1hcnkoaXJpcykgIyBzdW1tYXJpemUgdGhlIG9iamVjdA0KY2xhc3MoaXJpcykgIyBnaXZlIHRoZSBjbGFzcyBvZiB0aGUgb2JqZWN0DQpzdHIoaXJpcykgIyBleGFtaW5lIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIG9iamVjdA0KDQpzdHVkZW50czwtcmVhZC50YWJsZSgnaHR0cHM6Ly93d3cuZGlwaW50b3RoZXJlZWYuY29tL3VwbG9hZHMvMy83LzMvNS8zNzM1OTI0NS9zdHVkZW50cy50eHQnLGhlYWRlcj1ULCBzZXA9Ilx0IiwgZGVjPScuJykgIyBpbnNwZWN0IHRoZSBvYmplY3QgY3JlYXRlZA0KDQpjbGFzcyhzdHVkZW50cyRoZWlnaHQpDQpjbGFzcyhzdHVkZW50c1ssMV0pDQoNCnN0dWRlbnRzJGhlaWdodDwtYXMubnVtZXJpYyhzdHVkZW50cyRoZWlnaHQpICMgYXNzaWduZWQgbnVtZXJpY2FsIHZhbHVlIHRvIHRoaXMgY29sdW1uDQpjbGFzcyhzdHVkZW50cyRoZWlnaHQpICMgY2hlY2sgdGhlIGNoYW5nZSB3YXMgbWFkZQ0KDQpzdHVkZW50c1sxLF0gI2V4dHJhY3QgdGhlIGZpcnN0IHJvdyBvZiB0aGUgdGFibGUNCg0Kc3R1ZGVudHNbMSwxXSAjIGVsZW1lbnQgaW4gdGhlIGZpcnN0IHJvdywgZmlyc3QgY29sdW1uDQpzdHVkZW50cyRoZWlnaHRbMV0gIyBmaXJzdCBlbGVtZW50IGluIG91ciB2ZWN0b3IgaGVpZ2h0DQoNCnN0dWRlbnRzJGdlbmRlcj09ImZlbWFsZSIgIyBjaGVjayB3aGljaCBpbmZvcm1hdGlvbiBpcyBmb3IgZmVtYWxlDQoNCmY8LXN0dWRlbnRzJGdlbmRlcj09ImZlbWFsZSIgIyBjcmVhdGUgYSAnZmlsdGVyJyBjYWxsZWQgZg0KDQpmZW1hbGVzPC1zdHVkZW50c1tmLF0gIyBmaWx0ZXIgb3VyICdzdHVkZW50cycgZGF0YXNldA0KZmVtYWxlcw0KDQpkaW0oZmVtYWxlcykgIyBzaXplIG9mIG15IG5ldyBkYXRhIGZyYW1lDQpjb2xuYW1lcyhmZW1hbGVzKSAjIG5hbWVzIG9mIHRoZSBjb2x1bW5zDQpyb3duYW1lcyhmZW1hbGVzKSAjIG5hbWVzIG9mIHRoZSByb3dzDQpyb3duYW1lcyhmZW1hbGVzKTwtYygnVmFuZXNzYScsICdWaWNreScsICdNYXJpYW5uYScsICdKb3ljZScsICdWaWN0b3JpYScpDQpmZW1hbGVzDQoNCmxldmVscyhpcmlzJFNwZWNpZXMpDQpzZXRmPC1pcmlzJFNwZWNpZXM9PSJzZXRvc2EiDQpzZXRvc2E8LWlyaXNbc2V0ZixdDQp2ZXJmPC1pcmlzJFNwZWNpZXM9PSJ2ZXJzaWNvbG9yIg0KdmVyc2ljb2xvcjwtaXJpc1t2ZXJmLF0gDQp2aXJmPC1pcmlzJFNwZWNpZXM9PSJ2aXJnaW5pY2EiDQp2aXJnaW5pY2E8LWlyaXNbdmlyZixdIA0KDQpzYW1wbGUoZGF0YSwgc2l6ZSwgcmVwbGFjZSA9IEZBTFNFLCBwcm9iID0gTlVMTCkNCiNnZXQgc291cmNlIGNvZGUNCiMgVmlldyhzYW1wbGUpIE9SIGdldEFueXdoZXJlKHNhbXBsZSgpKSANCg0KbnJvdyhzdHVkZW50cykgIyBudW1iZXIgb2Ygcm93cyBpbiBzdHVkZW50LCBzYW1lIGFzIGRpbShzdHVkZW50cylbMV0gDQoxOm5yb3coc3R1ZGVudHMpICMgY3JlYXRlIGEgdmVjdG9yIGZyb20gMSB0byBucm93KHN0dWRlbnRzKSBvYnNlcnZhdGlvbjogMTANCnN0dWY8LXNhbXBsZSgxOm5yb3coc3R1ZGVudHMpLCAyKSAjIGZpbHRlciByYW5kb25seSAyIHN0dWRlbnRzIG9uIG15IDEwIHN0dWRlbnRzDQpzdHVmICMgbXkgdHdvIHN0dWRlbnRzDQpzdHVkZW50c1tzdHVmLF0gIyBhcHBseSBteSBmaWx0ZXINCg0KaW5kMTwtb3JkZXIgKHN0dWRlbnRzJGhlaWdodCApICMgY3JlYXRlIHRoZSB2ZWN0b3Igb2Ygb3JkZXI6IGluZDENCnJvd25hbWVzKHN0dWRlbnRzKSAjIHRoZSBmaXJzdCBpbmQgJzEgfCBoZWlnaHQgMTY3JyBzaG91bGQgbW92ZSBhdCBwb3NpdGlvbiA1DQpzdHVkZW50cyBbaW5kMSxdICMgc29ydGluZyBteSBkYXRhIHdpdGggbXkgdmVjdG9yIG9mIG9yZGVyLCBjaGVjayBpbmQuMSBpcyBhdCBwb3NpdGlvbiA1IA0KDQpzdHVkZW50c1tvcmRlcihzdHVkZW50cyRoZWlnaHQpLF0NCg0KaW5kMjwtb3JkZXIoLXN0dWRlbnRzJGhlaWdodCkNCmluZDM8LW9yZGVyKHN0dWRlbnRzJGhlaWdodCxkZWNyZWFzaW5nID1UKQ0KDQpjb2xvcnM8LWlmZWxzZShzdHVkZW50cyRnZW5kZXI9PSdtYWxlJywgJ2JsdWUnLCdyZWQnKSAjIGlmIGNvbmRpdGlvbiBpcyB0cnVlIGl0IHdpbGwgdGFrZSB0aGUgdmFsdWUgJ2JsdWUnLCBpZiBub3QgdGhlIHZhbHVlICdyZWQnIA0KDQpzdHVkZW50cyRjb2xvcnM8LWlmZWxzZShzdHVkZW50cyRnZW5kZXI9PSdtYWxlJywnYmx1ZScsJ3JlZCcpICMgY3JlYXRlIGEgbmV3IGNvbHVtbg0KDQpzdHVkZW50cyRnZW5kZXI8LWlmZWxzZShzdHVkZW50cyRnZW5kZXI9PSdtYWxlJywgJ2JsdWUnLCdyZWQnKSAjIHJlcGxhY2UgYW4gZXhpc3RpbmcgY29sdW1uDQoNCnN0dWRlbnRzJGhlaWdodCA8PSAxNjUgIyBzdHVkZW50cyBzaG9ydGVyIG9yIGVxdWFsIHRvIDE2NSBjbQ0Kc3R1ZGVudHMkc2hvZXNpemUgPCAzNyAjIHN0dWRlbnRzIHdpdGggc2hvZXMgc2l6ZSBsZXNzIHRoYW4gMzcNCnN0dWRlbnRzJGhlaWdodCA8PSAxNjUgJiBzdHVkZW50cyRzaG9lc2l6ZSA8IDM3ICMgc3R1ZGVudHMgd2l0aCBoZWlnaHQgYW5kIHNob2VzIHNpemUgPDM3DQpzdHVkZW50cyRkdWFsLmNvbmQ8LWlmZWxzZShzdHVkZW50cyRoZWlnaHQ8PTE2NSAmIHN0dWRlbnRzJHNob2VzaXplPDM3LCdibHVlJywncmVkJykgIyBVc2Ugd2l0aCBpZmVsc2UoKQ0Kc3R1ZGVudHMgIyBvbmx5IG9uZSBzdHVkZW50IGZvbGxvdyB0aGUgdHdvIGNvbmRpdGlvbnMNCg0KI2BzdHVkZW50c2AgZGF0YXNldA0Kc3R1ZGVudHMkZ2VuZGVyPC1pZmVsc2Uoc3R1ZGVudHMkZ2VuZGVyPT0nYmx1ZScsJ21hbGUnLCdmZW1hbGUnKQ0Kc3R1ZGVudHMkY29sb3JzPC1OVUxMDQpzdHVkZW50cyRkdWFsLmNvbmQ8LU5VTEwNCg0KIyBgaXJpc2AgZGF0YXNldA0KaXJpcyRjb2xvcnM8LWlmZWxzZShpcmlzJFNwZWNpZXM9PSdzZXRvc2EnLCdwdXJwbGUnLCBpZmVsc2UoaXJpcyRTcGVjaWVzPT0ndmVyc2ljb2xvcicsJ2JsdWUnLCdwaW5rJykpDQppcmlzW29yZGVyKGlyaXMkU2VwYWwuV2lkdGgsIGRlY3JlYXNpbmcgPSBUKSxdDQoNCmxpYnJhcnkgKGRwbHlyKQ0Kc2VsZWN0ZWQgPC0gc2VsZWN0KGlyaXMsIFNlcGFsLkxlbmd0aCwgU2VwYWwuV2lkdGgsIFBldGFsLkxlbmd0aCkgI1RvIHNlbGVjdCB0aGUgZm9sbG93aW5nIGNvbHVtbnMNCmhlYWQoc2VsZWN0ZWQpICMgcHJpbnQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZGF0YSBzZXQgY3JlYXRlZA0Kc2VsZWN0ZWQxIDwtIHNlbGVjdChpcmlzLCBTZXBhbC5MZW5ndGg6UGV0YWwuTGVuZ3RoKSAjVG8gc2VsZWN0IGFsbCBjb2x1bW5zIGZyb20gU2VwYWwuTGVuZ3RoIHRvIFBldGFsLkxlbmd0aA0KaGVhZChzZWxlY3RlZDEsIDQpICNUbyBwcmludCBmaXJzdCBmb3VyIHJvd3Mgb2YgdGhlIGRhdGEgc2V0IGNyZWF0ZWQgICAgICAgICAgICAgICAgICAgICAgIA0Kc2VsZWN0ZWQxIDwtIHNlbGVjdChpcmlzLGMoMzo1KSkgI1RvIHNlbGVjdCBjb2x1bW5zIHdpdGggbnVtZXJpYyBpbmRleGVzDQpoZWFkKHNlbGVjdGVkMSkNCg0Kc2VsZWN0ZWQgPC0gc2VsZWN0KGlyaXMsIC1TZXBhbC5MZW5ndGgsIC1TZXBhbC5XaWR0aCkNCmhlYWQoc2VsZWN0ZWQpDQoNCiNUbyBzZWxlY3QgdGhlIGZpcnN0IDMgcm93cyB3aXRoIFNwZWNpZXMgYXMgc2V0b3NhDQpmaWx0ZXJlZCA8LSBmaWx0ZXIoaXJpcywgU3BlY2llcyA9PSAic2V0b3NhIiApDQpoZWFkKGZpbHRlcmVkLDMpDQoNCiNUbyBzZWxlY3QgdGhlIGxhc3QgNSByb3dzIHdpdGggU3BlY2llcyBhcyB2ZXJzaWNvbG9yIGFuZCBTZXBhbCB3aWR0aCBtb3JlIHRoYW4gMw0KZmlsdGVyZWQxIDwtIGZpbHRlcihpcmlzLCBTcGVjaWVzID09ICJ2ZXJzaWNvbG9yIiwgU2VwYWwuV2lkdGggPiAzKQ0KdGFpbChmaWx0ZXJlZDEpDQoNCiNUbyBjcmVhdGUgYSBjb2x1bW4g4oCcR3JlYXRlci5IYWxm4oCdIHdoaWNoIHN0b3JlcyBUUlVFIGlmIGdpdmVuIGNvbmRpdGlvbiBpcyBUUlVFDQpjb2wxIDwtIG11dGF0ZShpcmlzLCBHcmVhdGVyLkhhbGYgPSBTZXBhbC5XaWR0aCA+IDAuNSAqIFNlcGFsLkxlbmd0aCkNCnRhaWwoY29sMSkNCg0KdGFibGUoY29sMSRHcmVhdGVyLkhhbGYpDQoNCiNUbyBhcnJhbmdlIFNlcGFsIFdpZHRoIGluIGFzY2VuZGluZyBvcmRlcg0KYXJyYW5nZWQgPC0gYXJyYW5nZShjb2wxLCBTZXBhbC5XaWR0aCkNCmhlYWQoYXJyYW5nZWQpDQojVG8gYXJyYW5nZSBTZXBhbCBXaWR0aCBpbiBkZXNjZW5kaW5nIG9yZGVyDQphcnJhbmdlZCA8LSBhcnJhbmdlKGNvbDEsIGRlc2MoU2VwYWwuV2lkdGgpKQ0KaGVhZChhcnJhbmdlZCkNCg0Kc3VtbWFyaXNlZCA8LSBzdW1tYXJpc2UoYXJyYW5nZWQsIE1lYW4uV2lkdGggPSBtZWFuKFNlcGFsLldpZHRoKSkNCmhlYWQoc3VtbWFyaXNlZCkNCg0KI1RvIGZpbmQgbWVhbiBzZXBhbCB3aWR0aCBieSBTcGVjaWVzLCB3ZSB1c2UgZ3JvdXBpbmcgYXMgZm9sbG93cw0KZ3AgPC0gZ3JvdXBfYnkoaXJpcyxTcGVjaWVzKQ0KbW4gPC0gc3VtbWFyaXNlKGdwLE1lYW4uU2VwYWwgPSBtZWFuKFNlcGFsLldpZHRoKSkNCm1uDQoNCiNUbyBnZXQgcm93cyB3aXRoIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucw0KaXJpcyAlPiUgZmlsdGVyKFNwZWNpZXMgPT0gInNldG9zYSIsU2VwYWwuV2lkdGggPiAzLjgpDQoNCmlyaXMgICU+JSBncm91cF9ieShTcGVjaWVzKSAlPiUgc3VtbWFyaXNlKE1lYW4uTGVuZ3RoID0gbWVhbihTZXBhbC5MZW5ndGgpKQ0KDQpyYWlydW9obzwtcmVhZC50YWJsZSgnRGF0YS9yYWlydW9oby50eHQnLGhlYWRlcj1ULCBzZXA9Ilx0IiwgZGVjPSIuIikNCmhlYWQocmFpcnVvaG8pDQoNClRXX2NvcmFsczwtcmVhZC50YWJsZSgnRGF0YS90d19jb3JhbHMudHh0JyxoZWFkZXI9VCwgc2VwPSJcdCIsIGRlYz0iLiIpDQpUV19jb3JhbHMNCg0KbGlicmFyeSh0aWR5cikNClRXX2NvcmFsc19sb25nIDwtIFRXX2NvcmFscyAlPiUgcGl2b3RfbG9uZ2VyKFNvdXRoZXJuX1RXOk5vcnRoZXJuX0lzLCBuYW1lc190byA9ICJSZWdpb24iLCB2YWx1ZXNfdG8gPSAiUmljaG5lc3MiKQ0KVFdfY29yYWxzX2xvbmcgPC1UV19jb3JhbHMgJT4lIHBpdm90X2xvbmdlcihjb2xzID0gZXZlcnl0aGluZygpLCBuYW1lc190byA9ICJSZWdpb24iLCB2YWx1ZXNfdG8gPSAiUmljaG5lc3MiKQ0KVFdfY29yYWxzX2xvbmcgDQoNClRXX2NvcmFsc193aWRlIDwtIHBpdm90X3dpZGVyKFRXX2NvcmFsc19sb25nLCBuYW1lc19mcm9tID0gUmVnaW9uLCB2YWx1ZXNfZnJvbSA9IFJpY2huZXNzKSANClRXX2NvcmFsc193aWRlDQoNCmluY29tZTwtcmVhZC50YWJsZSgnRGF0YS9tZXRvby50eHQnLGhlYWRlcj1ULCBzZXA9Ilx0IiwgZGVjPSIuIiwgbmEuc3RyaW5ncyA9ICJuL2EiKQ0KaW5jb21lDQoNCmluY29tZV9sb25nIDwtIGluY29tZSAlPiUgIHBpdm90X2xvbmdlcihjb2xzID0gLXN0YXRlLCANCiAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc190byA9IGMoInNleCIsIndvcmsiKSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNfc2VwID0gIl8iLCANCiAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNfdG8gPSAiaW5jb21lIikNCiAgICAgICAgICAgICAgICAgICAgICAgICANCmluY29tZV9sb25nDQoNCmluY29tZV9sb25nICU+JSBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gYyhzZXgsd29yayksIA0KICAgICAgICAgICAgdmFsdWVzX2Zyb20gPSBpbmNvbWUsDQogICAgICAgICAgICBuYW1lc19zZXAgPSAiLiIpDQoNCiMgTGV0J3MgZmlyc3QgY3JlYXRlIGEgZGVsaW1pdGVkIHRhYmxlDQppbmNvbWUubG9uZyA8LSBpbmNvbWUgJT4lICBwaXZvdF9sb25nZXIoY29scyA9IC0xLCANCiAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc190byA9ICJ2YXIxIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzX3RvID0gImluY29tZSIpDQppbmNvbWUubG9uZw0KDQojIFNwbGl0IHZhcjEgY29sdW1uIGludG8gdHdvIGNvbHVtbnMNCmluY29tZS5zZXAgPC0gaW5jb21lLmxvbmcgJT4lICBzZXBhcmF0ZShjb2wgPSB2YXIxLCANCiAgICAgICAgICAgICAgICAgICAgc2VwID0gIl8iLCANCiAgICAgICAgICAgICAgICAgICAgaW50byA9IGMoInNleCIsICJ3b3JrIikpDQppbmNvbWUuc2VwDQoNCmluY29tZS5sb25nICU+JSBzZXBhcmF0ZV9yb3dzKHZhcjEsIHNlcCA9ICJfIikNCg0KeCA8LSBjKDEuMCwgLTMuNCwgMiwgMTQwLjEpDQptb2RlKHgpDQoNCnR5cGVvZih4KQ0KDQp4IDwtIDQNCnR5cGVvZih4KQ0KDQp4IDwtIDRMDQp0eXBlb2YoeCkNCg0KeCA8LSBjKCJhIiwgImYiLCAicHJvamVjdCIsICJob3VzZSB2YWx1ZSIpDQp0eXBlb2YoeCkNCg0KeCA8LSAzDQp5IDwtIDUuMw0KDQp4ICsgeQ0KDQp4IDwtICIzIg0KeSA8LSAiNS4zIg0KIyBFcnJvciBpbiB4ICsgeTogbm9uLW51bWVyaWMgYXJndW1lbnQgdG8gYmluYXJ5IG9wZXJhdG9yDQoNCnggPC0gYyhUUlVFLCBGQUxTRSwgRkFMU0UsIFRSVUUpDQoNCnggPC0gYXMubG9naWNhbChjKDEsMCwwLDEpKQ0KDQphIDwtIGMoIk0iLCAiRiIsICJGIiwgIlUiLCAiRiIsICJNIiwgIk0iLCAiTSIsICJGIiwgIlUiKQ0KYS5mYWN0IDwtIGFzLmZhY3RvcihhKQ0KDQp0eXBlb2YoYSkNCg0KdHlwZW9mKGEuZmFjdCkNCg0KYS5mYWN0DQoNCmF0dHJpYnV0ZXMoYS5mYWN0KQ0KDQpsZXZlbHMoYS5mYWN0KQ0KDQpmYWN0b3IoYSwgbGV2ZWxzPWMoIlUiLCJGIiwiTSIpKQ0KDQppcmlzLnNlbDwtIHN1YnNldChpcmlzLCBTcGVjaWVzID09ICJzZXRvc2EiIHwgU3BlY2llcyA9PSAidmlyZ2luaWNhIikgIyBsZXQncyBzdWJzZXQgdHdvIHNwZWNpZXMNCmxldmVscyhpcmlzLnNlbCRTcGVjaWVzKSAjIHRoZSAzIHNwZWNpZXMgYXJlIHN0aWxsIHRoZXJlDQpib3hwbG90KFBldGFsLldpZHRoIH4gU3BlY2llcywgaXJpcy5zZWwsIGhvcml6b250YWwgPSBUUlVFKSAjIFRoaXMgY2FuIGJlIGEgbnVpc2FuY2Ugd2hlbiBwbG90dGluZyB0aGUgZGF0YSBzdWJzZXQNCg0KaXJpcy5zZWwkU3BlY2llcyA8LSBkcm9wbGV2ZWxzKGlyaXMuc2VsJFNwZWNpZXMpDQpsZXZlbHMoaXJpcy5zZWwkU3BlY2llcykNCmJveHBsb3QoUGV0YWwuV2lkdGggfiBTcGVjaWVzLCBpcmlzLnNlbCwgaG9yaXpvbnRhbCA9IFRSVUUpDQoNCnggPC0gYygyMywgTkEsIDEuMiwgNSkNCg0KeSA8LSBjKDIzLCBOVUxMLCAxLjIsIDUpDQoNCm1lYW4oeCkNCg0KbWVhbih5KQ0KDQp4IDwtIGMoNjc0ICwgNDE4NiAsIDUzMDggLCA1MDgzICwgNjE0MCAsIDYzODEpDQp4DQoNCnhbM10NCg0KeFtjKDEsMyw0KV0NCg0KeFsyOjRdDQoNCnhbMl0gPC0gMA0KeA0KDQp4IDwtIGMoImFsbCIsICJiIiwgIm9saXZlIikNCngNCg0KeCA8LSBjKCAxLjIsIDUsICJSdCIsICIyMDAwIikNCg0KdHlwZW9mKHgpDQoNCm0gPC0gbWF0cml4KHJ1bmlmKDksMCwxMCksIG5yb3cgPSAzLCBuY29sID0gMykNCm0NCg0KbSA8LSBhcnJheShydW5pZigyNywwLDEwKSwgYygzLDMsMykpDQptDQoNCm5hbWUgICA8LSBjKCJhMSIsICJhMiIsICJiMyIpDQp2YWx1ZTEgPC0gYygyMywgNCwgMTIpDQp2YWx1ZTIgPC0gYygxLCA0NSwgNSkNCmRhdCAgICA8LSBkYXRhLmZyYW1lKG5hbWUsIHZhbHVlMSwgdmFsdWUyKQ0KZGF0DQpzdHIoZGF0KSAjIHByb3ZpZGUgc3RydWN0dXJlDQphdHRyaWJ1dGVzKGRhdCkgIyBwcm92aWRlIGF0dHJpYnV0ZXMNCm5hbWVzKGRhdCkgIyBleHRyYWN0IGNvbHVtIG5hbWVzDQpyb3duYW1lcyhkYXQpICMgZXh0cmFjdCByb3cgbmFtZXMNCg0KQSA8LSBkYXRhLmZyYW1lKA0KICAgICB4ID0gYyg3LjMsIDI5LjQsIDI5LjQsIDIuOSwgMTIuMywgNy41LCAzNi4wLCA0LjgsIDE4LjgsIDQuMiksDQogICAgIHkgPSBjKDUuMiwgMjYuNiwgMzEuMiwgMi4yLCAxMy44LCA3LjgsIDM1LjIsIDguNiwgMjAuMywgMS4xKSApDQpCIDwtIGMoVFJVRSwgRkFMU0UpDQpDIDwtIGMoImFwcGxlcyIsICJvcmFuZ2VzIiwgInJvdW5kIikNCmxzdCA8LSBsaXN0KEEgPSBBLCBCID0gQiwgQyA9IEMpDQoNCnN0cihsc3QpDQpuYW1lcyhsc3QpDQoNCmxzdCRBDQoNCmxzdFtbMV1dDQpjbGFzcyhsc3RbWzFdXSkNCg0KbHN0Lm5vdGFncyA8LSBsaXN0KEEsIEIsIEQpDQpsc3Qubm90YWdzDQoNCm5hbWVzKGxzdC5ub3RhZ3MpDQoNCk0gPC0gbG0oIHkgfiB4LCBBKQ0Kc3RyKE0pDQpuYW1lcyhNKQ0KDQpzdHIoTSRxcikNCg0KTSRxciRyYW5rDQoNCnkgICA8LSBjKCIyMy44IiwgIjYiLCAiMTAwLjAxIiwiNiIpDQp5LmMgPC0gYXMubnVtZXJpYyh5KQ0KeS5jDQoNCmFzLmludGVnZXIoeSkNCg0KbnVtY2hhciA8LSBhcy5jaGFyYWN0ZXIoeS5jKQ0KbnVtY2hhcg0KDQpudW1mYWMgPC0gYXMuZmFjdG9yKHkpDQpudW1mYWMNCg0KY2hhcmZhYyA8LSBhcy5mYWN0b3IoeS5jKQ0KY2hhcmZhYw0KDQphcy5jaGFyYWN0ZXIoKSAjCUNvbnZlcnQgdG8gY2hhcmFjdGVyDQphcy5udW1lcmljKCkgIGFzLmRvdWJsZSgpCSMgQ29udmVydCB0byBkb3VibGUNCmFzLmludGVnZXIoKQkjIENvbnZlcnQgdG8gaW50ZWdlcg0KYXMuZmFjdG9yKCkJIyBDb252ZXJ0IHRvIGZhY3Rvcg0KYXMubG9naWNhbCgpCSNDb252ZXJ0IHRvIGEgQm9vbGVhbg0KYGBgey5yIC5kaXN0aWxsLWZvcmNlLWhpZ2hsaWdodGluZy1jc3N9DQpgYGANCg==" download="manipulation.R">Download manipulation.R</a></p>
</div>
<h1 id="topic-2---data-manipulation"><strong>Topic 2 - Data manipulation</strong></h1>
<p>Data manipulation involves modifying data to make it easier to read and to be more organized. We manipulate data for analysis and visualization. It is also used with the term ‘data exploration’ which involves organizing data using available sets of variables.</p>
<p>At times, the data collection process done by machines involves a lot of errors and inaccuracies in reading. Data manipulation is also used to remove these inaccuracies and make data more accurate and precise.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span> <span class='op'>(</span><span class='va'>datasets</span><span class='op'>)</span> <span class='co'># load the dataset package</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span>list<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># remove objects already present</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='co'># load iris dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span> <span class='co'># the function data import an object 'iris'</span>
<span class='va'>iris</span> <span class='co'># print the object</span>
<span class='fu'><a href='https://rdrr.io/r/utils/fix.html'>fix</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='co'># open a speadsheet on the object</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='co'># summarize the object</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='co'># give the class of the object</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='co'># examine the structure of the object</span>
</code></pre>
</div>
</div>
<p>The object `iris’ is a data.frame and is composed of 5 variables and 150 observations. Four variables are numeric, one is a factor made of 3 levels.</p>
<p>Other object types and structures also exist: data frame, factor, integer, matrix, etc. but more on this later (it is long and boring, yet important)</p>
<h2 id="row-and-column-selection">Row and column selection</h2>
<p>Let’s assume an online dataframe reporting the height and shoesize of 10 Taiwanese students:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='st'>'https://www.dipintothereef.com/uploads/3/7/3/5/37359245/students.txt'</span>,header<span class='op'>=</span><span class='cn'>T</span>, sep<span class='op'>=</span><span class='st'>"\t"</span>, dec<span class='op'>=</span><span class='st'>'.'</span><span class='op'>)</span> <span class='co'># inspect the object created</span>
</code></pre>
</div>
</div>
<p>A single column (height) is needed for further processing. This is accomplished by using the <code>$</code> operator. A column is selected by putting together on the same line the:</p>
<ul>
<li>name of the object</li>
<li>operator <code>$</code></li>
<li>name of the column</li>
</ul>
<p>Here the column <code>height</code> can be selected using: <code>students$height</code>. The same column can be extracted using the subscript which is denoted by the square brackets after the object name <code>students[,1]</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This column is an integer: a whole number (not a fractional number) that can be positive, negative, or zero. This can be converted as a numerical using the function: `as.numeric’</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>)</span> <span class='co'># assigned numerical value to this column</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>)</span> <span class='co'># check the change was made</span>
</code></pre>
</div>
</div>
<p>Extracting a row can obly be accomplished with a subsecript. Therefore, to extract the first row of our dataframe:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>[</span><span class='fl'>1</span>,<span class='op'>]</span> <span class='co'>#extract the first row of the table</span>
</code></pre>
</div>
</div>
<p>Following the same methods, check the results of:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>[</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>]</span> <span class='co'># element in the first row, first column</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># first element in our vector height</span>
</code></pre>
</div>
</div>
<p><span style="color: red">Always remember <code>object[no. row, no. column]</code></span></p>
<h2 id="sub-setting">Sub-setting</h2>
<p>The purpose is to extract information following a given condition. Such, we only want to select female students:</p>
<ol type="1">
<li>Add a condition and check whether or not the observation (row) is for female students:</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>"female"</span> <span class='co'># check which information is for female</span>
</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Create a filter, here I called it <code>f</code>:</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>f</span><span class='op'>&lt;-</span><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>"female"</span> <span class='co'># create a 'filter' called f</span>
</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Apply my filter using subsript, I want to extract only the rows that contain data for female students. I put the results in a new object call <code>female</code>:</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>females</span><span class='op'>&lt;-</span><span class='va'>students</span><span class='op'>[</span><span class='va'>f</span>,<span class='op'>]</span> <span class='co'># filter our 'students' dataset</span>
<span class='va'>females</span>
</code></pre>
</div>
</div>
<p>It selected 5 students. The dimensions of my new data frame is a table of 5 obs. by 4 col. Column names <code>colnames</code> remained unchanged, but I have now only 5 names for the rows <code>rownames</code>. I can rename my <code>rownames</code> by combining names into a vector <code>c</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>females</span><span class='op'>)</span> <span class='co'># size of my new data frame</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>females</span><span class='op'>)</span> <span class='co'># names of the columns</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>females</span><span class='op'>)</span> <span class='co'># names of the rows</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>females</span><span class='op'>)</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'Vanessa'</span>, <span class='st'>'Vicky'</span>, <span class='st'>'Marianna'</span>, <span class='st'>'Joyce'</span>, <span class='st'>'Victoria'</span><span class='op'>)</span>
<span class='va'>females</span>
</code></pre>
</div>
</div>
<blockquote>
<p><em><span style="color: green"><strong>RP2</strong>: Using our <code>iris</code> data set, create three different data set corresponding to the three species designated in the column <code>Species</code></span></em></p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>)</span>
<span class='va'>setf</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>==</span><span class='st'>"setosa"</span>
<span class='va'>setosa</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>[</span><span class='va'>setf</span>,<span class='op'>]</span>
<span class='va'>verf</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>==</span><span class='st'>"versicolor"</span>
<span class='va'>versicolor</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>[</span><span class='va'>verf</span>,<span class='op'>]</span> 
<span class='va'>virf</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>==</span><span class='st'>"virginica"</span>
<span class='va'>virginica</span><span class='op'>&lt;-</span><span class='va'>iris</span><span class='op'>[</span><span class='va'>virf</span>,<span class='op'>]</span> 
</code></pre>
</div>
</div>
<h2 id="sample">Sample</h2>
<p>The function <code>sample</code> is used to generate a sample of a specific size from a vector or a dataset, eithre with or without replacement.</p>
<p>The basic syntax of the <code>sample</code> function is as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>size</span>, replace <span class='op'>=</span> <span class='cn'>FALSE</span>, prob <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>
<span class='co'>#get source code</span>
<span class='co'># View(sample) OR getAnywhere(sample()) </span>
</code></pre>
</div>
</div>
<p>To select randomly two individuals in our<code>students</code> dataset, I first need to define the size of my target, create a filter with my random selection of individuals, then apply my filter on my <code>students</code> dataset:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>)</span> <span class='co'># number of rows in student, same as dim(students)[1] </span>
<span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>)</span> <span class='co'># create a vector from 1 to nrow(students) observation: 10</span>
<span class='va'>stuf</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>)</span>, <span class='fl'>2</span><span class='op'>)</span> <span class='co'># filter randonly 2 students on my 10 students</span>
<span class='va'>stuf</span> <span class='co'># my two students</span>
<span class='va'>students</span><span class='op'>[</span><span class='va'>stuf</span>,<span class='op'>]</span> <span class='co'># apply my filter</span>
</code></pre>
</div>
</div>
<h2 id="sorting">Sorting</h2>
<p>Sorting a data frame is done by combining command <code>order</code> with a subscript. Like for sub-setting, we first need to create a vector that will tell into which order the rows of the table need to be arranged:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ind1</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span> <span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span> <span class='op'>)</span> <span class='co'># create the vector of order: ind1</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>)</span> <span class='co'># the first ind '1 | height 167' should move at position 5</span>
<span class='va'>students</span> <span class='op'>[</span><span class='va'>ind1</span>,<span class='op'>]</span> <span class='co'># sorting my data with my vector of order, check ind.1 is at position 5 </span>
</code></pre>
</div>
</div>
<p>All can be combined into 1 line, without creating a vector order:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>)</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<p>You can now guess what the following vectors will do:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ind2</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>)</span>
<span class='va'>ind3</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span>,decreasing <span class='op'>=</span><span class='cn'>T</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="recoding">Recoding</h2>
<p>Recoding is replacing values with new ones. Values in a varaible can be recoded using the command <code>ifelse</code>. Le’s recode our <code>gender</code> variable with different colors in order to have male=blue and female=red. Note ‘equal to’ is given with the operator <code>==</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>colors</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>'male'</span>, <span class='st'>'blue'</span>,<span class='st'>'red'</span><span class='op'>)</span> <span class='co'># if condition is true it will take the value 'blue', if not the value 'red' </span>
</code></pre>
</div>
</div>
<p>You can create an new column:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>$</span><span class='va'>colors</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>'male'</span>,<span class='st'>'blue'</span>,<span class='st'>'red'</span><span class='op'>)</span> <span class='co'># create a new column</span>
</code></pre>
</div>
</div>
<p>Or replace the existing one:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>'male'</span>, <span class='st'>'blue'</span>,<span class='st'>'red'</span><span class='op'>)</span> <span class='co'># replace an existing column</span>
</code></pre>
</div>
</div>
<p>More operators, which can be combined together:</p>
<p><code>==</code> equal to</p>
<p><code>&gt;=</code> equal to or greater than</p>
<p><code>&lt;=</code> equal to or less than</p>
<p><code>!=</code> not equal to</p>
<p><code>&amp;</code> and</p>
<p><code>|</code> or</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span> <span class='op'>&lt;=</span> <span class='fl'>165</span> <span class='co'># students shorter or equal to 165 cm</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>shoesize</span> <span class='op'>&lt;</span> <span class='fl'>37</span> <span class='co'># students with shoes size less than 37</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>height</span> <span class='op'>&lt;=</span> <span class='fl'>165</span> <span class='op'>&amp;</span> <span class='va'>students</span><span class='op'>$</span><span class='va'>shoesize</span> <span class='op'>&lt;</span> <span class='fl'>37</span> <span class='co'># students with height and shoes size &lt;37</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>dual.cond</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>height</span><span class='op'>&lt;=</span><span class='fl'>165</span> <span class='op'>&amp;</span> <span class='va'>students</span><span class='op'>$</span><span class='va'>shoesize</span><span class='op'>&lt;</span><span class='fl'>37</span>,<span class='st'>'blue'</span>,<span class='st'>'red'</span><span class='op'>)</span> <span class='co'># Use with ifelse()</span>
<span class='va'>students</span> <span class='co'># only one student follow the two conditions</span>
</code></pre>
</div>
</div>
<blockquote>
<p><em><span style="color: green"><strong>RP3</strong>: Reverse variable <code>gender</code> with <code>male</code> and <code>female</code> by replacing color names. Delete extra variables created to come back to our orignal table (the variable received <code>NULL</code>). Using the <code>iris</code> dataset create a new variable with flower colors. Iris setosa is purple.Iris versicolor is blue. Iris virginica is pink. Sort individuals by decreasing <code>Sepal.Width</code>. Hypothesize on the use of this trait to discriminate the species.</span></em></p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#`students` dataset</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>students</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>==</span><span class='st'>'blue'</span>,<span class='st'>'male'</span>,<span class='st'>'female'</span><span class='op'>)</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>colors</span><span class='op'>&lt;-</span><span class='cn'>NULL</span>
<span class='va'>students</span><span class='op'>$</span><span class='va'>dual.cond</span><span class='op'>&lt;-</span><span class='cn'>NULL</span>

<span class='co'># `iris` dataset</span>
<span class='va'>iris</span><span class='op'>$</span><span class='va'>colors</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>==</span><span class='st'>'setosa'</span>,<span class='st'>'purple'</span>, <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>==</span><span class='st'>'versicolor'</span>,<span class='st'>'blue'</span>,<span class='st'>'pink'</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>iris</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Width</span>, decreasing <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<h2 id="package-dplyr">Package <code>dplyr</code></h2>
<p>So fare we used functions in base. Other useful functions<code>subset</code>, <code>with</code>, <code>within</code>, etc. Packages like <code>data.table</code>, <code>ggplot2</code>, <code>reshape2</code>, etc. also offer usueful functions. <code>dplyr</code> package is dedicated for manipulating the data in R with many common functions to fasten the data exploration and transformation. Some important functions included in the <code>dplyr</code> packages:</p>
<ul>
<li><code>select</code> to select columns (variables)</li>
<li><code>filter</code> to filter (subset) rows</li>
<li><code>mutate</code> to create new variables</li>
<li><code>summarise</code> to summarize (or aggregate) data</li>
<li><code>group_by</code> to group data</li>
<li><code>arrange</code> to sort data</li>
<li><code>join</code> to join data frames</li>
</ul>
<h3 id="select"><code>select</code></h3>
<p>It is used to select data by its column name. We can select any number of columns in a number of ways. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span> <span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>selected</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Sepal.Length</span>, <span class='va'>Sepal.Width</span>, <span class='va'>Petal.Length</span><span class='op'>)</span> <span class='co'>#To select the following columns</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>selected</span><span class='op'>)</span> <span class='co'># print the beginning of the data set created</span>
<span class='va'>selected1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Sepal.Length</span><span class='op'>:</span><span class='va'>Petal.Length</span><span class='op'>)</span> <span class='co'>#To select all columns from Sepal.Length to Petal.Length</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>selected1</span>, <span class='fl'>4</span><span class='op'>)</span> <span class='co'>#To print first four rows of the data set created                       </span>
<span class='va'>selected1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>iris</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#To select columns with numeric indexes</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>selected1</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We used <code>-</code> to hide a particular column</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>selected</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='op'>-</span><span class='va'>Sepal.Length</span>, <span class='op'>-</span><span class='va'>Sepal.Width</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>selected</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="filter"><code>filter</code></h3>
<p>It is used to find rows with matching criteria. It also works like the select() function, i.e., we pass a data frame along with a condition separated by a comma. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To select the first 3 rows with Species as setosa</span>
<span class='va'>filtered</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"setosa"</span> <span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>filtered</span>,<span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>And for dual conditions:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To select the last 5 rows with Species as versicolor and Sepal width more than 3</span>
<span class='va'>filtered1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"versicolor"</span>, <span class='va'>Sepal.Width</span> <span class='op'>&gt;</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>filtered1</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="mutate"><code>mutate</code></h3>
<p>It creates new columns and preserves the existing columns in a dataset. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To create a column “Greater.Half” which stores TRUE if given condition is TRUE</span>
<span class='va'>col1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>iris</span>, Greater.Half <span class='op'>=</span> <span class='va'>Sepal.Width</span> <span class='op'>&gt;</span> <span class='fl'>0.5</span> <span class='op'>*</span> <span class='va'>Sepal.Length</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>col1</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>To check how many flower satisfy this condition, the output of the function <code>table{base}</code> is a contingency table:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>col1</span><span class='op'>$</span><span class='va'>Greater.Half</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="arrange"><code>arrange</code></h3>
<p>It is used to sort rows by variables in both an ascending and descending order. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To arrange Sepal Width in ascending order</span>
<span class='va'>arranged</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>col1</span>, <span class='va'>Sepal.Width</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>arranged</span><span class='op'>)</span>
<span class='co'>#To arrange Sepal Width in descending order</span>
<span class='va'>arranged</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>col1</span>, <span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>Sepal.Width</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>arranged</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="summarise"><code>summarise</code></h3>
<p>It is used to find insights(mean, median, mode, etc.) from a dataset. It reduces multiple values down to a single value. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>summarised</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span><span class='va'>arranged</span>, Mean.Width <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>Sepal.Width</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>summarised</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="group_by"><code>group_by</code></h3>
<p>It is done to group observations within a dataset by one or more variables. Most data operations are performed on groups defined by variables. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To find mean sepal width by Species, we use grouping as follows</span>
<span class='va'>gp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>iris</span>,<span class='va'>Species</span><span class='op'>)</span>
<span class='va'>mn</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span><span class='va'>gp</span>,Mean.Sepal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>Sepal.Width</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mn</span>
</code></pre>
</div>
</div>
<h2 id="pipe-operator">Pipe operator</h2>
<p>Pipe operator lets us wrap multiple functions together. It is denoted as <code>%&gt;%</code>. It can be used with functions like <code>filter</code>, <code>select</code>, <code>arrange</code>, <code>summarise</code>, <code>group_by</code>, etc. For example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#To get rows with the following conditions</span>
<span class='va'>iris</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"setosa"</span>,<span class='va'>Sepal.Width</span> <span class='op'>&gt;</span> <span class='fl'>3.8</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>To find mean Sepal Length by Species, we use pipe operator as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>iris</span>  <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Species</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>Mean.Length <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>Sepal.Length</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<blockquote>
<p><em><span style="color: green"> <strong>Challenge</strong>: the data set <code>rairuoho</code>provides growth data for 8 days in different treatments. Reformat the table in order to have the <code>day</code> as a variable with 6 levels together with another variable called length. You may use another famous package for data manipulation <code>tidyr</code> and the function <code>gather()</code>. Current variables are given as:</span></em></p>
</blockquote>
<p><em><span style="color: green">- <code>day3</code> to <code>day8</code>: mean length of the grass at the given day </span></em></p>
<p><em><span style="color: green">- <code>day3</code> to <code>day8</code>: mean length of the grass at the given day </span></em></p>
<p><em><span style="color: green">- <code>germinate</code>: no. of germinated seeds </span></em></p>
<p><em><span style="color: green">- <code>bed</code>: where the grass was growing, 4 levels: thin (mould1), thick (mould2) mould, thin (paper4) and thick (paper8) paper </span></em></p>
<p><em><span style="color: green">- <code>treatement</code>: watering scheme, 2 levels: either pure water or water with nutrients </span></em></p>
<p><em><span style="color: green">- <code>treatement</code>: watering scheme, 2 levels: either pure water or water with nutrients </span></em></p>
<p><em><span style="color: green">- <code>spatial1</code>: vertical location of the plot </span></em></p>
<p><em><span style="color: green">- <code>spatial2</code>: horizontal location of the plot </span></em></p>
<p><em><span style="color: green">extra variable <code>row</code> and <code>column</code> can be removed</span></em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>rairuoho</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='st'>'Data/rairuoho.txt'</span>,header<span class='op'>=</span><span class='cn'>T</span>, sep<span class='op'>=</span><span class='st'>"\t"</span>, dec<span class='op'>=</span><span class='st'>"."</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>rairuoho</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="package-tidyr">Package <code>tidyr</code></h2>
<p>The function <code>gather</code> is depreciated (I am getting older and I keep using old function), and it is now recommended to switch to <code>pivot_longer()</code> still under active development: <code>df %&gt;% gather("key", "value", x, y, z)</code>is equivalent to <code>df %&gt;% pivot_longer(c(x, y, z), names_to = "key", values_to = "value")</code></p>
<p>Data tables come in different sizes and shape; they can be a very simple two column dataset or they can consist of many columns and “sub-columns”. Understanding its structure, and learning how to reshape it into a workable form is critical to an effective and error free analysis. The previous example illustrates the use of the package <code>tidyr</code> in tidying or reshaping tables. This package is the package by excellence to reorganize the structure of a table.</p>
<h3 id="pivot-data">Pivot data</h3>
<p>Dai &amp; Horng (2009) summarize the coral diversity around Taiwan. <code>TW_corals</code> displays scleractinian coral richness by coral reef regions:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>TW_corals</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='st'>'Data/tw_corals.txt'</span>,header<span class='op'>=</span><span class='cn'>T</span>, sep<span class='op'>=</span><span class='st'>"\t"</span>, dec<span class='op'>=</span><span class='st'>"."</span><span class='op'>)</span>
<span class='va'>TW_corals</span>
</code></pre>
</div>
<pre><code>  Southern_TW Northern_TW Eastern_TW Ludao Lanyu Xiaoliuqiu
1         280         136        210   250   248        239
  Penghu_North Penghu_East Penghu_Inner Penghu.South Dongsha Taiping
1          107          84           75           99     229     163
  Northern_Is
1         112</code></pre>
</div>
<p>This wide table can be easily reformat into a long table as we did before:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyr.tidyverse.org'>tidyr</a></span><span class='op'>)</span>
<span class='va'>TW_corals_long</span> <span class='op'>&lt;-</span> <span class='va'>TW_corals</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span><span class='va'>Southern_TW</span><span class='op'>:</span><span class='va'>Northern_Is</span>, names_to <span class='op'>=</span> <span class='st'>"Region"</span>, values_to <span class='op'>=</span> <span class='st'>"Richness"</span><span class='op'>)</span>
<span class='va'>TW_corals_long</span> <span class='op'>&lt;-</span><span class='va'>TW_corals</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='fu'><a href='https://tidyselect.r-lib.org/reference/everything.html'>everything</a></span><span class='op'>(</span><span class='op'>)</span>, names_to <span class='op'>=</span> <span class='st'>"Region"</span>, values_to <span class='op'>=</span> <span class='st'>"Richness"</span><span class='op'>)</span>
<span class='va'>TW_corals_long</span> 
</code></pre>
</div>
<pre><code># A tibble: 13 x 2
   Region       Richness
   &lt;chr&gt;           &lt;int&gt;
 1 Southern_TW       280
 2 Northern_TW       136
 3 Eastern_TW        210
 4 Ludao             250
 5 Lanyu             248
 6 Xiaoliuqiu        239
 7 Penghu_North      107
 8 Penghu_East        84
 9 Penghu_Inner       75
10 Penghu.South       99
11 Dongsha           229
12 Taiping           163
13 Northern_Is       112</code></pre>
</div>
<p>The reverse operation can be made using <code>pivot_wider</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>TW_corals_wide</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='op'>(</span><span class='va'>TW_corals_long</span>, names_from <span class='op'>=</span> <span class='va'>Region</span>, values_from <span class='op'>=</span> <span class='va'>Richness</span><span class='op'>)</span> 
<span class='va'>TW_corals_wide</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 13
  Southern_TW Northern_TW Eastern_TW Ludao Lanyu Xiaoliuqiu
        &lt;int&gt;       &lt;int&gt;      &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt;
1         280         136        210   250   248        239
# ... with 7 more variables: Penghu_North &lt;int&gt;, Penghu_East &lt;int&gt;,
#   Penghu_Inner &lt;int&gt;, Penghu.South &lt;int&gt;, Dongsha &lt;int&gt;,
#   Taiping &lt;int&gt;, Northern_Is &lt;int&gt;</code></pre>
</div>
<p>We’ve now recreated the wide version of our table.</p>
<p><span style="color: red"><strong>Note</strong>: The pipe operator <code>%&gt;%</code> is optional, but it is generally more elegant and you will discover its importance later when your coding skills are maturing.</span></p>
<h3 id="advanced-pivot-options">Advanced pivot options</h3>
<p>Here’s a subset of median income by sex and by work experience for 2017 in four states in US and Taiwan (real data).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>income</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='st'>'Data/metoo.txt'</span>,header<span class='op'>=</span><span class='cn'>T</span>, sep<span class='op'>=</span><span class='st'>"\t"</span>, dec<span class='op'>=</span><span class='st'>"."</span>, na.strings <span class='op'>=</span> <span class='st'>"n/a"</span><span class='op'>)</span>
<span class='va'>income</span>
</code></pre>
</div>
<pre><code>          state male_fulltime male_other female_fulltime female_other
1         Maine          4194       1508            3337         1148
2 Massachusetts          5505       1547            4486         1248
3  NewHampshire          4996       1689            3848         1260
4       Vermont          4210       1475            3516         1201
5        Taiwan          1806         NA            1510           NA</code></pre>
</div>
<p>At first glance, it might seem that we have three variables as in the earlier example, but upon closer examination, we see that we can tease out two variables from the column names: sex (<code>male</code> and <code>female</code>) and work experience (<code>fulltime</code> and <code>other</code>).</p>
<p><code>pivot_longer</code> has an argument, <code>names_sep</code>, that is passed the character that is used to delimit the two variable values. In our example, this character is <code>_</code>. Since the column values will be split across two variables we will also need to pass two column names to the <code>names_to</code> argument.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>income_long</span> <span class='op'>&lt;-</span> <span class='va'>income</span> <span class='op'>%&gt;%</span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='op'>-</span><span class='va'>state</span>, 
                         names_to <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"sex"</span>,<span class='st'>"work"</span><span class='op'>)</span>, 
                         names_sep <span class='op'>=</span> <span class='st'>"_"</span>, 
                         values_to <span class='op'>=</span> <span class='st'>"income"</span><span class='op'>)</span>
                         
<span class='va'>income_long</span>
</code></pre>
</div>
<pre><code># A tibble: 20 x 4
   state         sex    work     income
   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;
 1 Maine         male   fulltime   4194
 2 Maine         male   other      1508
 3 Maine         female fulltime   3337
 4 Maine         female other      1148
 5 Massachusetts male   fulltime   5505
 6 Massachusetts male   other      1547
 7 Massachusetts female fulltime   4486
 8 Massachusetts female other      1248
 9 NewHampshire  male   fulltime   4996
10 NewHampshire  male   other      1689
11 NewHampshire  female fulltime   3848
12 NewHampshire  female other      1260
13 Vermont       male   fulltime   4210
14 Vermont       male   other      1475
15 Vermont       female fulltime   3516
16 Vermont       female other      1201
17 Taiwan        male   fulltime   1806
18 Taiwan        male   other        NA
19 Taiwan        female fulltime   1510
20 Taiwan        female other        NA</code></pre>
</div>
<p>Obviously, the reverse is possible:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>income_long</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>sex</span>,<span class='va'>work</span><span class='op'>)</span>, 
            values_from <span class='op'>=</span> <span class='va'>income</span>,
            names_sep <span class='op'>=</span> <span class='st'>"."</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5 x 5
  state         male.fulltime male.other female.fulltime female.other
  &lt;chr&gt;                 &lt;int&gt;      &lt;int&gt;           &lt;int&gt;        &lt;int&gt;
1 Maine                  4194       1508            3337         1148
2 Massachusetts          5505       1547            4486         1248
3 NewHampshire           4996       1689            3848         1260
4 Vermont                4210       1475            3516         1201
5 Taiwan                 1806         NA            1510           NA</code></pre>
</div>
<h3 id="separating-elements">Separating elements</h3>
<p>The <code>tidyr</code> package offers other functions not directly tied to pivoting. For example, to split a column into two or more columns based on a column’s delimited value, use the <code>separate</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Let's first create a delimited table</span>
<span class='va'>income.long</span> <span class='op'>&lt;-</span> <span class='va'>income</span> <span class='op'>%&gt;%</span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span>, 
                         names_to <span class='op'>=</span> <span class='st'>"var1"</span>, 
                         values_to <span class='op'>=</span> <span class='st'>"income"</span><span class='op'>)</span>
<span class='va'>income.long</span>
</code></pre>
</div>
<pre><code># A tibble: 20 x 3
   state         var1            income
   &lt;chr&gt;         &lt;chr&gt;            &lt;int&gt;
 1 Maine         male_fulltime     4194
 2 Maine         male_other        1508
 3 Maine         female_fulltime   3337
 4 Maine         female_other      1148
 5 Massachusetts male_fulltime     5505
 6 Massachusetts male_other        1547
 7 Massachusetts female_fulltime   4486
 8 Massachusetts female_other      1248
 9 NewHampshire  male_fulltime     4996
10 NewHampshire  male_other        1689
11 NewHampshire  female_fulltime   3848
12 NewHampshire  female_other      1260
13 Vermont       male_fulltime     4210
14 Vermont       male_other        1475
15 Vermont       female_fulltime   3516
16 Vermont       female_other      1201
17 Taiwan        male_fulltime     1806
18 Taiwan        male_other          NA
19 Taiwan        female_fulltime   1510
20 Taiwan        female_other        NA</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Split var1 column into two columns</span>
<span class='va'>income.sep</span> <span class='op'>&lt;-</span> <span class='va'>income.long</span> <span class='op'>%&gt;%</span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/separate.html'>separate</a></span><span class='op'>(</span>col <span class='op'>=</span> <span class='va'>var1</span>, 
                    sep <span class='op'>=</span> <span class='st'>"_"</span>, 
                    into <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"sex"</span>, <span class='st'>"work"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>income.sep</span>
</code></pre>
</div>
<pre><code># A tibble: 20 x 4
   state         sex    work     income
   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;
 1 Maine         male   fulltime   4194
 2 Maine         male   other      1508
 3 Maine         female fulltime   3337
 4 Maine         female other      1148
 5 Massachusetts male   fulltime   5505
 6 Massachusetts male   other      1547
 7 Massachusetts female fulltime   4486
 8 Massachusetts female other      1248
 9 NewHampshire  male   fulltime   4996
10 NewHampshire  male   other      1689
11 NewHampshire  female fulltime   3848
12 NewHampshire  female other      1260
13 Vermont       male   fulltime   4210
14 Vermont       male   other      1475
15 Vermont       female fulltime   3516
16 Vermont       female other      1201
17 Taiwan        male   fulltime   1806
18 Taiwan        male   other        NA
19 Taiwan        female fulltime   1510
20 Taiwan        female other        NA</code></pre>
</div>
<h3 id="splitting-rows">Splitting rows</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>income.long</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/separate_rows.html'>separate_rows</a></span><span class='op'>(</span><span class='va'>var1</span>, sep <span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 40 x 3
   state         var1     income
   &lt;chr&gt;         &lt;chr&gt;     &lt;int&gt;
 1 Maine         male       4194
 2 Maine         fulltime   4194
 3 Maine         male       1508
 4 Maine         other      1508
 5 Maine         female     3337
 6 Maine         fulltime   3337
 7 Maine         female     1148
 8 Maine         other      1148
 9 Massachusetts male       5505
10 Massachusetts fulltime   5505
# ... with 30 more rows</code></pre>
</div>
<p>Other functions from the <code>tidyr</code> package allow to (check help of the functions): replicate rows by count (<code>uncount</code>), combining elements from many columns into a single column (<code>unite</code>), etc. Many online documentation exists online on the use of this package especially convenient when you have to repeat a formatting task on a large data set.</p>
<h2 id="data-object-type-and-structure">Data object type and structure</h2>
<h3 id="core-data-types">Core data types</h3>
<p>These data types, or modes, define how the values are stored in the computer. You can get an object’s mode using the <code>typeof</code> function. Note that R also has a built-in <code>mode</code> function that will serve the same purpose with the one exception in that it will not distinguish integers from doubles.</p>
<h4 id="numeric">Numeric</h4>
<p>The numeric data type is probably the simplest. It consists of numbers such as integers (e.g. 1 ,-3 ,33 ,0) or doubles (e.g. 0.3, 12.4, -0.04, 1.0). For example, to create a numeric (double) vector we can type:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.0</span>, <span class='op'>-</span><span class='fl'>3.4</span>, <span class='fl'>2</span>, <span class='fl'>140.1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/mode.html'>mode</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;numeric&quot;</code></pre>
</div>
<p>To assess if the number is stored as an integer or a double use the <code>typeof</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;double&quot;</code></pre>
</div>
<p>Note that removing the fraction part of a number when creating a numeric object does not necessarily create an integer. For example, creating what seems to be an integer object returns double when queried by <code>typeof</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fl'>4</span>
<span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;double&quot;</code></pre>
</div>
<p>To force R to recognize a value as an integer add an upper case <code>L</code> to the number.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fl'>4L</span>
<span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;integer&quot;</code></pre>
</div>
<h4 id="character">Character</h4>
<p>The character data type consists of letters or words such as “a”, “f”, “project”, “house value”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>, <span class='st'>"f"</span>, <span class='st'>"project"</span>, <span class='st'>"house value"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<p>Characters can also consist of numbers represented as characters. The distinction between a character representation of a number and a numeric one is important. For example, if we have two numeric vectors <code>x</code> and <code>y</code> such as</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fl'>3</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fl'>5.3</span>
</code></pre>
</div>
</div>
<p>and we choose to sum the two variables, we get:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>+</span> <span class='va'>y</span>
</code></pre>
</div>
<pre><code>[1] 8.3</code></pre>
</div>
<p>If we repeat these steps but instead choose to represent the numbers ‘3’ and ‘5.3’ as characters we get the following error message:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='st'>"3"</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='st'>"5.3"</span>
<span class='co'># Error in x + y: non-numeric argument to binary operator</span>
</code></pre>
</div>
</div>
<p>Note the use of quotes to force numbers to character mode.</p>
<h4 id="logical">Logical</h4>
<p>Logical values can take on one of two values: <code>TRUE</code> or <code>FALSE</code>. These can also be represented as <code>1</code> or <code>0</code>. For example, to create a logical vector of 4 elements, you can type</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>or</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Note that in both cases, <code>typeof</code> returns logical. Also note that the <code>1</code>’s and <code>0</code>’s in the last example are converted to <code>TRUE</code>’s and <code>FALSE</code>’s internally.</p>
<h3 id="derived-data-types">Derived data types</h3>
<p>These data types are stored as either numeric, character or logical but have additional <em>attribute</em> information that allow these objects to be treated in special ways by certain functions in R. These attributes define an object’s <strong>class</strong> and can be extracted from that object via the ‘class’ function.</p>
<h4 id="factor">Factor</h4>
<p><strong>Factors</strong> are normally used to group variables into a fixed number of unique categories or <strong>levels</strong>. For example, a dataset may be grouped by gender or month of the year. Such data are usually loaded into R as a numeric or character data type requiring that they be converted to a factor using the <code>as.factor</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"M"</span>, <span class='st'>"F"</span>, <span class='st'>"F"</span>, <span class='st'>"U"</span>, <span class='st'>"F"</span>, <span class='st'>"M"</span>, <span class='st'>"M"</span>, <span class='st'>"M"</span>, <span class='st'>"F"</span>, <span class='st'>"U"</span><span class='op'>)</span>
<span class='va'>a.fact</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>a</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Note that <code>a</code> is of <code>character</code> data type.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>a</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<p>However, the derived object <code>a.fact</code> is now stored as an <code>integer</code>!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>a.fact</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;integer&quot;</code></pre>
</div>
<p>Yet, when displaying the contents of <code>a.fact</code> we see character values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>a.fact</span>
</code></pre>
</div>
<pre><code> [1] M F F U F M M M F U
Levels: F M U</code></pre>
</div>
<p>How can this be? Well, <code>a.fact</code> is a more complicated object than the simple objects created thus far in that the factor is storing additional information not seen in its output. This hidden information is stored in <strong>attributes</strong>. To view these hidden attributes, use the <code>attributes</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>a.fact</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$levels
[1] &quot;F&quot; &quot;M&quot; &quot;U&quot;

$class
[1] &quot;factor&quot;</code></pre>
</div>
<p>There are two attributes: <code>levels</code> and <code>class</code>. The levels attribute lists the three unique values in <code>a.fact</code>. The order in which these levels are listed reflect their <em>numeric</em> representation. So in essence, <code>a.fact</code> is storing each value as an integer that points to one of the three unique levels. The unique levels of a factor, and the order in which they are stored can be extracted using the <code>levels</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>a.fact</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;F&quot; &quot;M&quot; &quot;U&quot;</code></pre>
</div>
<p>Remember, the order in which the levels are displayed match their integer representation. If we wanted them in a different order (i.e. U first followed by F then M) we would need to modify them by recreating the factor object as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>a</span>, levels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"U"</span>,<span class='st'>"F"</span>,<span class='st'>"M"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] M F F U F M M M F U
Levels: U F M</code></pre>
</div>
<p>This can be important when you will try to rearrange a plot.</p>
<blockquote>
<p>*<span style="color: green"><strong>RP4</strong>: Understanding the factors and their levels is critical, especially when you will subset. Let’s explore together why using our <code>iris</code> dataset</p>
</blockquote>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>iris.sel</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"setosa"</span> <span class='op'>|</span> <span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"virginica"</span><span class='op'>)</span> <span class='co'># let's subset two species</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>iris.sel</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>)</span> <span class='co'># the 3 species are still there</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/boxplot.html'>boxplot</a></span><span class='op'>(</span><span class='va'>Petal.Width</span> <span class='op'>~</span> <span class='va'>Species</span>, <span class='va'>iris.sel</span>, horizontal <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='co'># This can be a nuisance when plotting the data subset</span>

<span class='va'>iris.sel</span><span class='op'>$</span><span class='va'>Species</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span><span class='op'>(</span><span class='va'>iris.sel</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>iris.sel</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/boxplot.html'>boxplot</a></span><span class='op'>(</span><span class='va'>Petal.Width</span> <span class='op'>~</span> <span class='va'>Species</span>, <span class='va'>iris.sel</span>, horizontal <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><strong>ALWAYS</strong> CHECK THE DATA TYPE AND STRUCTRE OF YOUR DATA SET!</p>
<h4 id="date">Date</h4>
<p>Date values are stored as numbers. But to be properly interpreted as a date object in R, their attribute must be explicitly defined as a <strong>date</strong>. R provides many facilities to convert and manipulate dates and times, but a package called <code>lubridate</code> makes working with dates/times much easier. Working wit data could be the object of a specific topic, and it will no be covered here.</p>
<h4 id="na-and-null">NA and NULL</h4>
<p>You will find that many data files contain missing or unknown values. It may be tempting to assign these missing or unknown values a <code>0</code> but doing so can lead to many undesirable results when analyzing the data. R has two placeholders for such elements: <code>NA</code> and <code>NULL</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>23</span>, <span class='cn'>NA</span>, <span class='fl'>1.2</span>, <span class='fl'>5</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><code>NA</code> (Not Available) is a missing value indicator. It suggests that a value should be present but is unknown.</p>
<p>The <code>NULL</code> object also represents missing values but its interpretation is slightly different in that it suggests that the value does not exist or that it’s not measurable.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>23</span>, <span class='cn'>NULL</span>, <span class='fl'>1.2</span>, <span class='fl'>5</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Remember when we previously removed the variables that we did not want to exist in our <code>students</code> dataset.The difference between <code>NA</code> and <code>NULL</code> may seem subtle, but their interpretation in some functions can lead to different outcomes. For example, when computing the mean of <code>x</code>, R returns an <code>NA</code> value:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] NA</code></pre>
</div>
<p>This serves as a check to remind the user that one of the elements is missing. This can be overcome by setting the <code>na.rm</code> parameter to <code>TRUE</code> as in <code>mean(x, na.rm=T)</code> in which case R ignores the missing value.</p>
<p>A <code>NULL</code> object, on the other hand, is treated differently. Since <code>NULL</code> implies that a value should not be present, R no longer feels the need to treat such element as questionable and allows the mean value to be computed:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 9.733333</code></pre>
</div>
<p>It’s more common to find data tables with missing elements populated with <code>NA</code>’s than <code>NULL</code>’s so unless you have a specific reason to use <code>NULL</code> as a missing value placeholder, use <code>NA</code> instead.</p>
<h3 id="data-structures">Data structures</h3>
<p>Most datasets we work with consist of batches of values such as a table of temperature values or a list of survey results. These batches are stored in R in one of several data structures. These include <strong>(atomic) vectors</strong>, <strong>matrices</strong>, <strong>data frames</strong> and <strong>lists</strong>.</p>
<p><img src="Figures/data_structures.png" /></p>
<h4 id="atomic-vectors">(Atomic) vectors</h4>
<p>The <strong>atomic vector</strong> (or <strong>vector</strong> for short) is the simplest data structure in R which consists of an ordered set of values of the same type and or class (e.g. numeric, character, date, etc…). A vector can be created using the combine function c() as in</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>674</span> , <span class='fl'>4186</span> , <span class='fl'>5308</span> , <span class='fl'>5083</span> , <span class='fl'>6140</span> , <span class='fl'>6381</span><span class='op'>)</span>
<span class='va'>x</span>
</code></pre>
</div>
<pre><code>[1]  674 4186 5308 5083 6140 6381</code></pre>
</div>
<p>As we seen before, a vector object is an indexable collection of values which allows one to access a specific index number. For example, to access the third element of x, type:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 5308</code></pre>
</div>
<p>You can also select a subset of elements by index values using the combine function c().</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1]  674 5308 5083</code></pre>
</div>
<p>Or, if you are interested in a range of indexed values such as index 2 through 4, use the : operator.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 4186 5308 5083</code></pre>
</div>
<p>You can also assign new values to a specific index. For example, we can replace the second value in vector <code>x</code> with <code>0</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
<span class='va'>x</span>
</code></pre>
</div>
<pre><code>[1]  674    0 5308 5083 6140 6381</code></pre>
</div>
<p>Note that a vector can store any data type such as characters.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"all"</span>, <span class='st'>"b"</span>, <span class='st'>"olive"</span><span class='op'>)</span>
<span class='va'>x</span>
</code></pre>
</div>
<pre><code>[1] &quot;all&quot;   &quot;b&quot;     &quot;olive&quot;</code></pre>
</div>
<p>However, a vector can only be of one type. For example, you cannot mix numeric and character types as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>1.2</span>, <span class='fl'>5</span>, <span class='st'>"Rt"</span>, <span class='st'>"2000"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>In such a situation, R will convert the element types to the <strong>highest common mode</strong> following the order <strong>NULL</strong> &lt; <strong>logical</strong> &lt; <strong>integer</strong> &lt; <strong>double</strong> &lt; <strong>character</strong>. In our working example, the elements are coerced to character:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/typeof.html'>typeof</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<h4 id="matrices-and-arrays">Matrices and arrays</h4>
<p>Matrices in R can be thought of as vectors indexed using two indices instead of one. For example, the following line of code creates a 3 by 3 matrix of randomly generated values. The parameters ‘nrow’ and ‘ncol’ define the matrix dimension and the function ‘runif’ generates the nine random numbers that populate this matrix.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>9</span>,<span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='fl'>3</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>m</span>
</code></pre>
</div>
<pre><code>          [,1]     [,2]     [,3]
[1,] 8.7172048 9.131649 6.052889
[2,] 7.2350361 8.565779 5.207854
[3,] 0.2473982 7.406476 3.751035</code></pre>
</div>
<p>If a higher dimension vector is desired, then use the <code>array</code> function to generate the n-dimensional object. A 3x3x3 array can be created as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>27</span>,<span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>3</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>m</span>
</code></pre>
</div>
<pre><code>, , 1

         [,1]      [,2]     [,3]
[1,] 7.030466 1.4057961 6.517890
[2,] 1.802346 0.8787458 5.888998
[3,] 8.409041 5.7994245 6.040864

, , 2

         [,1]     [,2]      [,3]
[1,] 5.286929 5.616133 8.9893844
[2,] 5.102135 6.876007 0.2525158
[3,] 7.682393 2.326143 3.2855390

, , 3

         [,1]     [,2]     [,3]
[1,] 2.352612 3.594784 6.067781
[2,] 3.641350 9.092086 2.019733
[3,] 6.058528 4.011887 2.443003</code></pre>
</div>
<p>Matrices and arrays can store numeric or character data types, but they cannot store both.</p>
<h4 id="data-frames">Data frames</h4>
<p>A <strong>data frame</strong> is what comes closest to our perception of a data table. It’s an extension of the matrix object in that, unlike a matrix, a data frame can <em>mix</em> data types across columns (e.g. both numeric and character columns can coexist in a data frame) but data type remains the same across rows.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>name</span>   <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a1"</span>, <span class='st'>"a2"</span>, <span class='st'>"b3"</span><span class='op'>)</span>
<span class='va'>value1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>23</span>, <span class='fl'>4</span>, <span class='fl'>12</span><span class='op'>)</span>
<span class='va'>value2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>45</span>, <span class='fl'>5</span><span class='op'>)</span>
<span class='va'>dat</span>    <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>name</span>, <span class='va'>value1</span>, <span class='va'>value2</span><span class='op'>)</span>
<span class='va'>dat</span>
</code></pre>
</div>
<pre><code>  name value1 value2
1   a1     23      1
2   a2      4     45
3   b3     12      5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span> <span class='co'># provide structure</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   3 obs. of  3 variables:
 $ name  : chr  &quot;a1&quot; &quot;a2&quot; &quot;b3&quot;
 $ value1: num  23 4 12
 $ value2: num  1 45 5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span> <span class='co'># provide attributes</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;name&quot;   &quot;value1&quot; &quot;value2&quot;

$class
[1] &quot;data.frame&quot;

$row.names
[1] 1 2 3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span> <span class='co'># extract colum names</span>
</code></pre>
</div>
<pre><code>[1] &quot;name&quot;   &quot;value1&quot; &quot;value2&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span> <span class='co'># extract row names</span>
</code></pre>
</div>
<pre><code>[1] &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
</div>
<h4 id="lists">Lists</h4>
<p>A <strong>list</strong> is an ordered set of components stored in a 1D vector. In fact, it’s another kind of vector called a recursive vector where each vector element can be of different data type and structure. This implies that each element of a list can hold complex objects such as matrices, data frames and other list objects too! Think of a list as a single column spreadsheet where each cell stores anything from a number, to a three paragraph sentence, to a five column table.</p>
<p>A list is constructed using the <code>list</code> function. For example, the following list consists of 3 components: a two-column data frame (tagged as component <code>A</code>), a two element logical vector (tagged as component <code>B</code>) and a three element character vector (tagged as component <code>C</code>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>A</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
     x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7.3</span>, <span class='fl'>29.4</span>, <span class='fl'>29.4</span>, <span class='fl'>2.9</span>, <span class='fl'>12.3</span>, <span class='fl'>7.5</span>, <span class='fl'>36.0</span>, <span class='fl'>4.8</span>, <span class='fl'>18.8</span>, <span class='fl'>4.2</span><span class='op'>)</span>,
     y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5.2</span>, <span class='fl'>26.6</span>, <span class='fl'>31.2</span>, <span class='fl'>2.2</span>, <span class='fl'>13.8</span>, <span class='fl'>7.8</span>, <span class='fl'>35.2</span>, <span class='fl'>8.6</span>, <span class='fl'>20.3</span>, <span class='fl'>1.1</span><span class='op'>)</span> <span class='op'>)</span>
<span class='va'>B</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>C</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"apples"</span>, <span class='st'>"oranges"</span>, <span class='st'>"round"</span><span class='op'>)</span>
<span class='va'>lst</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>A <span class='op'>=</span> <span class='va'>A</span>, B <span class='op'>=</span> <span class='va'>B</span>, C <span class='op'>=</span> <span class='va'>C</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>You can view each component’s structure using the <code>str</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>lst</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 3
 $ A:&#39;data.frame&#39;:  10 obs. of  2 variables:
  ..$ x: num [1:10] 7.3 29.4 29.4 2.9 12.3 7.5 36 4.8 18.8 4.2
  ..$ y: num [1:10] 5.2 26.6 31.2 2.2 13.8 7.8 35.2 8.6 20.3 1.1
 $ B: logi [1:2] TRUE FALSE
 $ C: chr [1:3] &quot;apples&quot; &quot;oranges&quot; &quot;round&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>lst</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;A&quot; &quot;B&quot; &quot;C&quot;</code></pre>
</div>
<p>Each component of a list can be extracted using the <code>$</code> symbol followed by that component’s name. For example, to access component A from list <code>lst</code>, type:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>lst</span><span class='op'>$</span><span class='va'>A</span>
</code></pre>
</div>
<pre><code>      x    y
1   7.3  5.2
2  29.4 26.6
3  29.4 31.2
4   2.9  2.2
5  12.3 13.8
6   7.5  7.8
7  36.0 35.2
8   4.8  8.6
9  18.8 20.3
10  4.2  1.1</code></pre>
</div>
<p>You can also access that same component using its numerical index. Since A is the first component in <code>lst</code>, its numerical index is <code>1</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>lst</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>      x    y
1   7.3  5.2
2  29.4 26.6
3  29.4 31.2
4   2.9  2.2
5  12.3 13.8
6   7.5  7.8
7  36.0 35.2
8   4.8  8.6
9  18.8 20.3
10  4.2  1.1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>lst</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;data.frame&quot;</code></pre>
</div>
<p>Note that components do not require names. For example, we could have created a list as follows (note the omission of <code>A=</code>, <code>B=</code>, etc…):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>lst.notags</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>A</span>, <span class='va'>B</span>, <span class='va'>D</span><span class='op'>)</span>
<span class='va'>lst.notags</span>
</code></pre>
</div>
<pre><code>[[1]]
      x    y
1   7.3  5.2
2  29.4 26.6
3  29.4 31.2
4   2.9  2.2
5  12.3 13.8
6   7.5  7.8
7  36.0 35.2
8   4.8  8.6
9  18.8 20.3
10  4.2  1.1

[[2]]
[1]  TRUE FALSE

[[3]]
function (expr, name) 
.External(C_doD, expr, name)
&lt;bytecode: 0x000000001d9d2ef8&gt;
&lt;environment: namespace:stats&gt;</code></pre>
</div>
<p>When lists do not have component names, the <code>names</code> function will return NULL.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>lst.notags</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>NULL</code></pre>
</div>
<p>You’ll find that many functions in R return list objects such as the linear regression model function <code>lm</code>. For example, when we run a regression analysis for vector elements <code>x</code> and <code>y</code> (in data frame <code>A</code>) and save the output of the regression analysis to an object called M:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>M</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span> <span class='va'>y</span> <span class='op'>~</span> <span class='va'>x</span>, <span class='va'>A</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>M</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 12
 $ coefficients : Named num [1:2] 0.0779 0.991
  ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;(Intercept)&quot; &quot;x&quot;
 $ residuals    : Named num [1:10] -2.112 -2.612 1.988 -0.752 1.533 ...
  ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
 $ effects      : Named num [1:10] -48.07 -36.54 3.13 -0.66 2 ...
  ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;(Intercept)&quot; &quot;x&quot; &quot;&quot; &quot;&quot; ...
 $ rank         : int 2
 $ fitted.values: Named num [1:10] 7.31 29.21 29.21 2.95 12.27 ...
  ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
 $ assign       : int [1:2] 0 1
 $ qr           :List of 5
  ..$ qr   : num [1:10, 1:2] -3.162 0.316 0.316 0.316 0.316 ...
  .. ..- attr(*, &quot;dimnames&quot;)=List of 2
  .. .. ..$ : chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
  .. .. ..$ : chr [1:2] &quot;(Intercept)&quot; &quot;x&quot;
  .. ..- attr(*, &quot;assign&quot;)= int [1:2] 0 1
  ..$ qraux: num [1:2] 1.32 1.44
  ..$ pivot: int [1:2] 1 2
  ..$ tol  : num 1e-07
  ..$ rank : int 2
  ..- attr(*, &quot;class&quot;)= chr &quot;qr&quot;
 $ df.residual  : int 8
 $ xlevels      : Named list()
 $ call         : language lm(formula = y ~ x, data = A)
 $ terms        :Classes &#39;terms&#39;, &#39;formula&#39;  language y ~ x
  .. ..- attr(*, &quot;variables&quot;)= language list(y, x)
  .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
  .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
  .. .. .. ..$ : chr [1:2] &quot;y&quot; &quot;x&quot;
  .. .. .. ..$ : chr &quot;x&quot;
  .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;x&quot;
  .. ..- attr(*, &quot;order&quot;)= int 1
  .. ..- attr(*, &quot;intercept&quot;)= int 1
  .. ..- attr(*, &quot;response&quot;)= int 1
  .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
  .. ..- attr(*, &quot;predvars&quot;)= language list(y, x)
  .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;y&quot; &quot;x&quot;
 $ model        :&#39;data.frame&#39;:  10 obs. of  2 variables:
  ..$ y: num [1:10] 5.2 26.6 31.2 2.2 13.8 7.8 35.2 8.6 20.3 1.1
  ..$ x: num [1:10] 7.3 29.4 29.4 2.9 12.3 7.5 36 4.8 18.8 4.2
  ..- attr(*, &quot;terms&quot;)=Classes &#39;terms&#39;, &#39;formula&#39;  language y ~ x
  .. .. ..- attr(*, &quot;variables&quot;)= language list(y, x)
  .. .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
  .. .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
  .. .. .. .. ..$ : chr [1:2] &quot;y&quot; &quot;x&quot;
  .. .. .. .. ..$ : chr &quot;x&quot;
  .. .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;x&quot;
  .. .. ..- attr(*, &quot;order&quot;)= int 1
  .. .. ..- attr(*, &quot;intercept&quot;)= int 1
  .. .. ..- attr(*, &quot;response&quot;)= int 1
  .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
  .. .. ..- attr(*, &quot;predvars&quot;)= language list(y, x)
  .. .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
  .. .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;y&quot; &quot;x&quot;
 - attr(*, &quot;class&quot;)= chr &quot;lm&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>M</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;coefficients&quot;  &quot;residuals&quot;     &quot;effects&quot;       &quot;rank&quot;         
 [5] &quot;fitted.values&quot; &quot;assign&quot;        &quot;qr&quot;            &quot;df.residual&quot;  
 [9] &quot;xlevels&quot;       &quot;call&quot;          &quot;terms&quot;         &quot;model&quot;        </code></pre>
</div>
<p>The <code>M</code> list is more complex than the simple list <code>lst</code> we created earlier. In addition to having more components, it stores a <em>wider</em> range of data types and structures. For example, element qr is itself a list of five elements!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>M</span><span class='op'>$</span><span class='va'>qr</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 5
 $ qr   : num [1:10, 1:2] -3.162 0.316 0.316 0.316 0.316 ...
  ..- attr(*, &quot;dimnames&quot;)=List of 2
  .. ..$ : chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
  .. ..$ : chr [1:2] &quot;(Intercept)&quot; &quot;x&quot;
  ..- attr(*, &quot;assign&quot;)= int [1:2] 0 1
 $ qraux: num [1:2] 1.32 1.44
 $ pivot: int [1:2] 1 2
 $ tol  : num 1e-07
 $ rank : int 2
 - attr(*, &quot;class&quot;)= chr &quot;qr&quot;</code></pre>
</div>
<p>So if we want to access the element rank in the component qr of list <code>M</code>, we can type:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>M</span><span class='op'>$</span><span class='va'>qr</span><span class='op'>$</span><span class='va'>rank</span>
</code></pre>
</div>
<pre><code>[1] 2</code></pre>
</div>
<h3 id="coercing-data">Coercing data</h3>
<p>Data can be coerced from one type to another. For example, to coerce the following vector object from character to numeric, use the <code>as.numeric</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>y</span>   <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"23.8"</span>, <span class='st'>"6"</span>, <span class='st'>"100.01"</span>,<span class='st'>"6"</span><span class='op'>)</span>
<span class='va'>y.c</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
<span class='va'>y.c</span>
</code></pre>
</div>
<pre><code>[1]  23.80   6.00 100.01   6.00</code></pre>
</div>
<p>The <code>as.numeric</code> function forces the vector to a double (you could have also used the <code>as.double</code> function). If you convert <code>y</code> to an integer, R will remove all fractional parts of the number.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  23   6 100   6</code></pre>
</div>
<p>To convert a number to a character use <code>as.character</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>numchar</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>y.c</span><span class='op'>)</span>
<span class='va'>numchar</span>
</code></pre>
</div>
<pre><code>[1] &quot;23.8&quot;   &quot;6&quot;      &quot;100.01&quot; &quot;6&quot;     </code></pre>
</div>
<p>You can also coerce a number or character to a factor.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>numfac</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
<span class='va'>numfac</span>
</code></pre>
</div>
<pre><code>[1] 23.8   6      100.01 6     
Levels: 100.01 23.8 6</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>charfac</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>y.c</span><span class='op'>)</span>
<span class='va'>charfac</span>
</code></pre>
</div>
<pre><code>[1] 23.8   6      100.01 6     
Levels: 6 23.8 100.01</code></pre>
</div>
<p>There are many other coercion functions in R, a summary of some the most common ones we’ll be using in this course follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb54"><pre class="sourceCode r fold-show"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>() <span class="co">#    Convert to character</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>()  <span class="fu">as.double</span>()   <span class="co"># Convert to double</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>()    <span class="co"># Convert to integer</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>() <span class="co"># Convert to factor</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.logical</span>()    <span class="co">#Convert to a Boolean</span></span></code></pre></div>
</div>
<hr />
<blockquote>
<p><em><span style="color: green"><strong>RP5</strong>: create the following data frame summarizing the results of a small experiment on 5 individuals testing the efficiency of a specific diet (drinking bubble tea only - feak data). Create another vector with the weight loss (in %) associated with subject no. What can you say on this bubble tea diet? Reformat the table by creating: a variable <code>individual</code> with the identity of the five individuals, a variable <code>diet</code> with two levels <code>before</code> and <code>after</code>, a variable <code>weight</code> containing the weight before and after the diet. </span></em></p>
</blockquote>
<div class="sourceCode" id="cb55"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="reuse">Reuse</h3>
<p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
